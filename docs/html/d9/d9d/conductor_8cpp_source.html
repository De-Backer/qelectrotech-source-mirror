<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QElectroTech: conductor.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QElectroTech
   &#160;<span id="projectnumber">0.80</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li><li class="navelem"><a class="el" href="../../dir_424028af68d5f22f35dfc4d91e3e4ff6.html">qetgraphicsitem</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">conductor.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d9/d9d/conductor_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    Copyright 2006-2020 The QElectroTech Team</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    This file is part of QElectroTech.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    QElectroTech is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    the Free Software Foundation, either version 2 of the License, or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    (at your option) any later version.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    QElectroTech is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    GNU General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    along with QElectroTech.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;QtDebug&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;QMultiHash&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d0f/conductor_8h.html">conductor.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d9f/conductorsegment_8h.html">conductorsegment.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d8f/conductorsegmentprofile_8h.html">conductorsegmentprofile.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dcc/conductortextitem_8h.html">conductortextitem.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dfe/element_8h.html">element.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d1b/diagram_8h.html">diagram.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d8a/diagramcommands_8h.html">diagramcommands.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/db5/qetdiagrameditor_8h.html">qetdiagrameditor.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/dbe/terminal_8h.html">terminal.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/df1/conductorautonumerotation_8h.html">conductorautonumerotation.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d80/conductorpropertiesdialog_8h.html">conductorpropertiesdialog.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d34/qpropertyundocommand_8h.html">QPropertyUndoCommand/qpropertyundocommand.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d60/numerotationcontextcommands_8h.html">numerotationcontextcommands.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#define PR(x) qDebug() &lt;&lt; #x &quot; = &quot; &lt;&lt; x;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="../../d9/d9d/conductor_8cpp.html#aa67543462bcc869371f4cc00874b4ff1">   36</a></span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d84/classConductor.html#a6b018f0dc7cff588cf7ae39aa832c7ad">Conductor::pen_and_brush_initialized</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;QPen <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">Conductor::conductor_pen</a> = QPen();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;QBrush <a class="code" href="../../d3/d84/classConductor.html#af36e7c8376f8603a9b6ec13d50438ab9">Conductor::conductor_brush</a> = QBrush();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../d4/dab/classConductorXmlRetroCompatibility.html">   42</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html">ConductorXmlRetroCompatibility</a></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ab80d43fec1906dcf4de37c3edc9ee546">   44</a></span>&#160;        <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../d3/d84/classConductor.html">Conductor</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">   46</a></span>&#160;        <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">loadSequential</a>(<span class="keyword">const</span> QDomElement &amp;dom_element, <span class="keyword">const</span> QString&amp; seq, QStringList* list)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            <span class="keywordflow">while</span> (!dom_element.attribute(seq + QString::number(i+1)).isEmpty())</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                    list-&gt;append(dom_element.attribute(seq + QString::number(i+1)));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                    i++;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d4/dab/classConductorXmlRetroCompatibility.html#af087d12d540554849387ca74eb8ca152">   56</a></span>&#160;        <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#af087d12d540554849387ca74eb8ca152">loadSequential</a>(<span class="keyword">const</span> QDomElement &amp;dom_element, <a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *conductor)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html">autonum::sequentialNumbers</a> sn;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">loadSequential</a>(dom_element,<span class="stringliteral">&quot;sequ_&quot;</span>,&amp;sn.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#aa38bf112eea4e01b94268d3af2db5a01">unit</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">loadSequential</a>(dom_element,<span class="stringliteral">&quot;sequf_&quot;</span>,&amp;sn.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#ab5dc793e92c9652ee566d934c5242db9">unit_folio</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">loadSequential</a>(dom_element,<span class="stringliteral">&quot;seqt_&quot;</span>,&amp;sn.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a5d687806008632a20c5cdf305f137d9d">ten</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">loadSequential</a>(dom_element,<span class="stringliteral">&quot;seqtf_&quot;</span>,&amp;sn.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a85a5919f823c375a4b3a60652c2bfef8">ten_folio</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">loadSequential</a>(dom_element,<span class="stringliteral">&quot;seqh_&quot;</span>,&amp;sn.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a1843e7c596b163de22955fcc1c169692">hundred</a>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">loadSequential</a>(dom_element,<span class="stringliteral">&quot;seqhf_&quot;</span>,&amp;sn.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#af41a8da3da3b391cee97a2a248fad026">hundred_folio</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            conductor-&gt;<a class="code" href="../../d3/d84/classConductor.html#a409cf24ca0ee090594c10871de24ab9d">rSequenceNum</a>() = sn;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;};</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a76859ff778f0d9af3ca6d7bc84c26e6d">   77</a></span>&#160;<a class="code" href="../../d3/d84/classConductor.html#a76859ff778f0d9af3ca6d7bc84c26e6d">Conductor::Conductor</a>(<a class="code" href="../../d9/ded/classTerminal.html">Terminal</a> *p1, <a class="code" href="../../d9/ded/classTerminal.html">Terminal</a>* p2) :</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a>(p1),</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>(p2),</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab42995a924568fbce27990580ded2eeb">m_mouse_over</a>(false),</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>(nullptr),</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>(nullptr),</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ae2a6458dc6a6f8f8fefec4581a80c107">m_moving_segment</a>(false),</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a>(false),</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a015b1f66cea917ce4959e64d5f66b3d6">has_to_save_profile</a>(false),</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a8e1b9e04db1bc058bb5c7d9755eff693">must_highlight_</a>(<a class="code" href="../../d3/d84/classConductor.html">Conductor</a>::<a class="code" href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5a501f3c487de3ac2177f6e52952c9a8e0">None</a>)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="comment">//set Zvalue at 11 to be upper than the DiagramImageItem and element</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    setZValue(11);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a910b9c82821697e07931e212a4ab3891">m_previous_z_value</a> = zValue();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">//Add this conductor to the list of conductor of each of the two terminal</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">bool</span> ajout_p1 = <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; addConductor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">bool</span> ajout_p2 = <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; addConductor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">//m_valid become false if the conductor can&#39;t be added to terminal (conductor already exist)</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a9f867194e70f4dc63c9d1c0461e743e7">m_valid</a> = (!ajout_p1 || !ajout_p2) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="comment">//Default attribut for paint a conductor</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#a6b018f0dc7cff588cf7ae39aa832c7ad">pen_and_brush_initialized</a>)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.setJoinStyle(Qt::MiterJoin);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.setCapStyle(Qt::SquareCap);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.setColor(Qt::black);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.setStyle(Qt::SolidLine);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.setWidthF(1.0);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#af36e7c8376f8603a9b6ec13d50438ab9">conductor_brush</a>.setColor(Qt::white);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#af36e7c8376f8603a9b6ec13d50438ab9">conductor_brush</a>.setStyle(Qt::NoBrush);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a6b018f0dc7cff588cf7ae39aa832c7ad">pen_and_brush_initialized</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">//By default, the 4 profils are nuls -&gt; we must to use priv_calculeConductor</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>.insert(Qt::TopLeftCorner,     <a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a>());</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>.insert(Qt::TopRightCorner,    <a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a>());</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>.insert(Qt::BottomLeftCorner,  <a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a>());</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>.insert(Qt::BottomRightCorner, <a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a>());</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="comment">//Generate the path of this conductor.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">generateConductorPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    setFlags(QGraphicsItem::ItemIsSelectable | QGraphicsItem::ItemSendsScenePositionChanges);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    setAcceptHoverEvents(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">// Add the text field</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> = <span class="keyword">new</span> <a class="code" href="../../da/d11/classConductorTextItem.html">ConductorTextItem</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    connect(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>, &amp;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#a95006abe16806c3889216c8834db7ddf">ConductorTextItem::textEdited</a>, <span class="keyword">this</span>, &amp;<a class="code" href="../../d3/d84/classConductor.html#a6ce9bc6c9c6f6fad3c96322a1776eeb3">Conductor::displayedTextChanged</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="comment">//Set the default conductor properties.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (p1-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a675199cb4cf139c7bb667ba7ecf5a7eb">diagram</a>())</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">setProperties</a>(p1-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a675199cb4cf139c7bb667ba7ecf5a7eb">diagram</a>()-&gt;<a class="code" href="../../da/d91/classDiagram.html#a5bc94725d451ecf6cfdf6844448602ba">defaultConductorProperties</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p2-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a675199cb4cf139c7bb667ba7ecf5a7eb">diagram</a>())</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">setProperties</a>(p2-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a675199cb4cf139c7bb667ba7ecf5a7eb">diagram</a>()-&gt;<a class="code" href="../../da/d91/classDiagram.html#a5bc94725d451ecf6cfdf6844448602ba">defaultConductorProperties</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a4468b131db64527cf524701627df25fc">  137</a></span>&#160;<a class="code" href="../../d3/d84/classConductor.html#a4468b131db64527cf524701627df25fc">Conductor::~Conductor</a>()</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">removeHandler</a>();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a35ee48aaa14c345828ba931876dba1c9">removeConductor</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a35ee48aaa14c345828ba931876dba1c9">removeConductor</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a4406a6201746cf192c00662d464c7c0c">deleteSegments</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a189d20f735051205a4de96c87d0db9cc">  150</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d84/classConductor.html#a189d20f735051205a4de96c87d0db9cc">Conductor::isValid</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d84/classConductor.html#a9f867194e70f4dc63c9d1c0461e743e7">m_valid</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#af2f106ce228e9dff58d4002bf6c946e8">  161</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#af2f106ce228e9dff58d4002bf6c946e8">Conductor::updatePath</a>(<span class="keyword">const</span> QRectF &amp;rect) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    QPointF p1, p2;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    p1 = <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    p2 = <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a3c7bd8e59efaa5f9c9a02f37ade90555">segmentsCount</a>() &amp;&amp; !<a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[<a class="code" href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d">currentPathType</a>()].isNull())</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a63e3ae4489861b547d68d4e10a4a6410">updateConductorPath</a>(p1, <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), p2, <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">generateConductorPath</a>(p1, <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), p2, <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    QGraphicsObject::update(rect);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ae179dfb31032f55b10d9a3200aa15acf">  177</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ae179dfb31032f55b10d9a3200aa15acf">Conductor::segmentsToPath</a>()</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    QPainterPath <a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a8099231eca7f72573c51ea77b8c39af9">setPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">//Start the path</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>.moveTo(<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> -&gt; firstPoint());</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="comment">//Each segments</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment = <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">while</span>(segment -&gt; hasNextSegment()) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>.lineTo(segment -&gt; secondPoint());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        segment = segment -&gt; nextSegment();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">//Finish the path</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>.lineTo(segment -&gt; secondPoint());</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a8099231eca7f72573c51ea77b8c39af9">setPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">//If conductor is selected and he&#39;s not being modified</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">//we update the position of the handlers</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (isSelected() &amp;&amp; !<a class="code" href="../../d3/d84/classConductor.html#ae2a6458dc6a6f8f8fefec4581a80c107">m_moving_segment</a>)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#a9a90b13a4ecbff5790c8f82f6231f99d">handlerPoints</a>().size() == <a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.size())</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#ad061b78a3976c1b05f05f839fcb00cde">adjusteHandlerPos</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">removeHandler</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#afb3100d2ff5431340611d058be72f3dd">addHandler</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a63e3ae4489861b547d68d4e10a4a6410">  218</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a63e3ae4489861b547d68d4e10a4a6410">Conductor::updateConductorPath</a>(<span class="keyword">const</span> QPointF &amp;p1, <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88">Qet::Orientation</a> o1, <span class="keyword">const</span> QPointF &amp;p2, <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88">Qet::Orientation</a> o2) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    Q_UNUSED(o1);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    Q_UNUSED(o2);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a> &amp;conductor_profile = <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[<a class="code" href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d">currentPathType</a>()];</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    Q_ASSERT_X(conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#af724e7448a3b337a8234e186aadd8b98">segmentsCount</a>(<a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a32994dd97504d378777f3cdddcf4c2dd">QET::Both</a>) &gt; 1, <span class="stringliteral">&quot;Conductor::priv_modifieConductor&quot;</span>, <span class="stringliteral">&quot;pas de points a modifier&quot;</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    Q_ASSERT_X(!conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#aa4c8e0092f244fb52a51ea077797088a">isNull</a>(),                 <span class="stringliteral">&quot;Conductor::priv_modifieConductor&quot;</span>, <span class="stringliteral">&quot;pas de profil utilisable&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// recupere les coordonnees fournies des bornes</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    QPointF new_p1 = mapFromScene(p1);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    QPointF new_p2 = mapFromScene(p2);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    QRectF new_rect = QRectF(new_p1, new_p2);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// recupere la largeur et la hauteur du profil</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    qreal profile_width  = conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#afd04acde9a63054014226d7f878a799b">width</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    qreal profile_height = conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#ac6c6820aae624e5d765a31a64a0c13cc">height</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// calcule les differences verticales et horizontales a appliquer</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    qreal h_diff = (qAbs(new_rect.width())  - qAbs(profile_width) ) * <a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">getSign</a>(profile_width);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    qreal v_diff = (qAbs(new_rect.height()) - qAbs(profile_height)) * <a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">getSign</a>(profile_height);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// applique les differences aux segments</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    QMultiHash&lt;ConductorSegmentProfile *, qreal&gt; segments_lengths;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    segments_lengths.unite(<a class="code" href="../../d3/d84/classConductor.html#a8ea3acabe2c6619939325511f3e98f66">shareOffsetBetweenSegments</a>(h_diff, conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#a0f9eb955fae2302b5fe1f98c685c7bb5">horizontalSegments</a>()));</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    segments_lengths.unite(<a class="code" href="../../d3/d84/classConductor.html#a8ea3acabe2c6619939325511f3e98f66">shareOffsetBetweenSegments</a>(v_diff, conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#a3f6551cf26b3627f6646e3f3b4f285c5">verticalSegments</a>()));</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// en deduit egalement les coefficients d&#39;inversion (-1 pour une inversion, +1 pour conserver le meme sens)</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">int</span> horiz_coeff = <a class="code" href="../../d3/d84/classConductor.html#a94d54afba64998cbeccd6f24add6f823">getCoeff</a>(new_rect.width(),  profile_width);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">int</span> verti_coeff = <a class="code" href="../../d3/d84/classConductor.html#a94d54afba64998cbeccd6f24add6f823">getCoeff</a>(new_rect.height(), profile_height);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// genere les nouveaux points</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    QList&lt;QPointF&gt; points;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    points &lt;&lt; new_p1;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">int</span> limit = conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#adddd10be98df8d611560d00000bebbe8">segments</a>.count() - 1;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; limit ; ++ i) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// dernier point</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        QPointF previous_point = points.last();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">// profil de segment de conducteur en cours</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="../../db/deb/classConductorSegmentProfile.html">ConductorSegmentProfile</a> *csp = conductor_profile.<a class="code" href="../../de/d50/classConductorProfile.html#adddd10be98df8d611560d00000bebbe8">segments</a>.at(i);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">// coefficient et offset a utiliser pour ce point</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        qreal coeff = csp -&gt; isHorizontal ? horiz_coeff : verti_coeff;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        qreal offset_applied = segments_lengths.value(csp);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// applique l&#39;offset et le coeff au point</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">if</span> (csp -&gt; isHorizontal) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            points &lt;&lt; QPointF (</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                previous_point.x() + (coeff * offset_applied),</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                previous_point.y()</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            );</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            points &lt;&lt; QPointF (</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                previous_point.x(),</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                previous_point.y() + (coeff * offset_applied)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            );</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    points &lt;&lt; new_p2;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a44995cef34e660c9c5b2349d97d18029">pointsToSegments</a>(points);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ae179dfb31032f55b10d9a3200aa15acf">segmentsToPath</a>();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a8ea3acabe2c6619939325511f3e98f66">  287</a></span>&#160;QHash&lt;ConductorSegmentProfile *, qreal&gt; <a class="code" href="../../d3/d84/classConductor.html#a8ea3acabe2c6619939325511f3e98f66">Conductor::shareOffsetBetweenSegments</a>(</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keyword">const</span> qreal &amp;offset,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">const</span> QList&lt;ConductorSegmentProfile *&gt; &amp;segments_list,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keyword">const</span> qreal &amp;precision</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// construit le QHash qui sera retourne</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    QHash&lt;ConductorSegmentProfile *, qreal&gt; segments_hash;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">foreach</span>(<a class="code" href="../../db/deb/classConductorSegmentProfile.html">ConductorSegmentProfile</a> *csp, segments_list) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        segments_hash.insert(csp, csp -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// memorise le signe de la longueur de chaque segement</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    QHash&lt;ConductorSegmentProfile *, int&gt; segments_signs;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">foreach</span>(<a class="code" href="../../db/deb/classConductorSegmentProfile.html">ConductorSegmentProfile</a> *csp, segments_hash.keys()) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        segments_signs.insert(csp, <a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">getSign</a>(csp -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">//qDebug() &lt;&lt; &quot;repartition d&#39;un offset de&quot; &lt;&lt; offset &lt;&lt; &quot;px sur&quot; &lt;&lt; segments_list.count() &lt;&lt; &quot;segments&quot;;</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// repartit l&#39;offset sur les segments</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    qreal remaining_offset = offset;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">while</span> (remaining_offset &gt; precision || remaining_offset &lt; -precision) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">// recupere le nombre de segments differents ayant une longueur non nulle</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        uint segments_count = 0;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">foreach</span>(<a class="code" href="../../db/deb/classConductorSegmentProfile.html">ConductorSegmentProfile</a> *csp, segments_hash.keys()) <span class="keywordflow">if</span> (segments_hash[csp]) ++ segments_count;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">//qDebug() &lt;&lt; &quot;  remaining_offset =&quot; &lt;&lt; remaining_offset;</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        qreal local_offset = remaining_offset / segments_count;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">//qDebug() &lt;&lt; &quot;  repartition d&#39;un offset local de&quot; &lt;&lt; local_offset &lt;&lt; &quot;px sur&quot; &lt;&lt; segments_count &lt;&lt; &quot;segments&quot;;</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        remaining_offset = 0.0;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">foreach</span>(<a class="code" href="../../db/deb/classConductorSegmentProfile.html">ConductorSegmentProfile</a> *csp, segments_hash.keys()) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="comment">// ignore les segments de longueur nulle</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">if</span> (!segments_hash[csp]) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// applique l&#39;offset au segment</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="comment">//qreal segment_old_length = segments_hash[csp];</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            segments_hash[csp] += local_offset;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="comment">// (la longueur du segment change de signe) &lt;=&gt; (le segment n&#39;a pu absorbe tout l&#39;offset)</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">if</span> (segments_signs[csp] != <a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">getSign</a>(segments_hash[csp])) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="comment">// on remet le trop-plein dans la reserve d&#39;offset</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                remaining_offset += qAbs(segments_hash[csp]) * <a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">getSign</a>(local_offset);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <span class="comment">//qDebug() &lt;&lt; &quot;    trop-plein de&quot; &lt;&lt; qAbs(segments_hash[csp]) * getSign(local_offset) &lt;&lt; &quot;remaining_offset =&quot; &lt;&lt; remaining_offset;</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                segments_hash[csp] = 0.0;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="comment">//qDebug() &lt;&lt; &quot;    offset local de&quot; &lt;&lt; local_offset &lt;&lt; &quot;accepte&quot;;</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span>(segments_hash);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">  346</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">Conductor::generateConductorPath</a>(<span class="keyword">const</span> QPointF &amp;p1, <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88">Qet::Orientation</a> o1, <span class="keyword">const</span> QPointF &amp;p2, <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88">Qet::Orientation</a> o2) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    QPointF sp1, sp2, depart, newp1, newp2, arrivee, depart0, arrivee0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88">Qet::Orientation</a> ori_depart, ori_arrivee;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// s&#39;assure qu&#39;il n&#39;y a ni points</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    QList&lt;QPointF&gt; points;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// mappe les points par rapport a la scene</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    sp1 = mapFromScene(p1);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    sp2 = mapFromScene(p2);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// prolonge les bornes</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    newp1 = <a class="code" href="../../d3/d84/classConductor.html#a8c48237171938b9962367c2af665d92f">extendTerminal</a>(sp1, o1);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    newp2 = <a class="code" href="../../d3/d84/classConductor.html#a8c48237171938b9962367c2af665d92f">extendTerminal</a>(sp2, o2);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// distingue le depart de l&#39;arrivee : le trajet se fait toujours de gauche a droite (apres prolongation)</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (newp1.x() &lt;= newp2.x()) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        depart      = newp1;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        arrivee     = newp2;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        depart0     = sp1;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        arrivee0    = sp2;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        ori_depart  = o1;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        ori_arrivee = o2;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        depart      = newp2;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        arrivee     = newp1;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        depart0     = sp2;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        arrivee0    = sp1;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        ori_depart  = o2;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        ori_arrivee = o1;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// debut du trajet</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    points &lt;&lt; depart0;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// prolongement de la borne de depart</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    points &lt;&lt; depart;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// commence le vrai trajet</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (depart.y() &lt; arrivee.y()) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// trajet descendant</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> ((ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a> &amp;&amp; (ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37">Qet::South</a> || ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a>)) || (ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a> &amp;&amp; ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a>)) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="comment">// cas &quot;3&quot;</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordtype">int</span> ligne_inter_x = qRound(depart.x() + arrivee.x()) / 2;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">while</span> (ligne_inter_x % <a class="code" href="../../da/d91/classDiagram.html#a8bcc3268e7dd96d8347cb402b4c964c6">Diagram::xGrid</a>) -- ligne_inter_x;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            points &lt;&lt; QPointF(ligne_inter_x, depart.y());</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            points &lt;&lt; QPointF(ligne_inter_x, arrivee.y());</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37">Qet::South</a> &amp;&amp; (ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a> || ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a>)) || (ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a> &amp;&amp; ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a>)) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="comment">// cas &quot;4&quot;</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordtype">int</span> ligne_inter_y = qRound(depart.y() + arrivee.y()) / 2;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">while</span> (ligne_inter_y % <a class="code" href="../../da/d91/classDiagram.html#ac017014f1be4db392204038141222505">Diagram::yGrid</a>) -- ligne_inter_y;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            points &lt;&lt; QPointF(depart.x(), ligne_inter_y);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            points &lt;&lt; QPointF(arrivee.x(), ligne_inter_y);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a> || ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a>) &amp;&amp; (ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a> || ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a>)) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            points &lt;&lt; QPointF(arrivee.x(), depart.y()); <span class="comment">// cas &quot;2&quot;</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            points &lt;&lt; QPointF(depart.x(), arrivee.y()); <span class="comment">// cas &quot;1&quot;</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="comment">// trajet montant</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span> ((ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a> &amp;&amp; (ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a> || ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37">Qet::South</a>)) || (ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a> &amp;&amp; ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37">Qet::South</a>)) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="comment">// cas &quot;3&quot;</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordtype">int</span> ligne_inter_y = qRound(depart.y() + arrivee.y()) / 2;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">while</span> (ligne_inter_y % <a class="code" href="../../da/d91/classDiagram.html#ac017014f1be4db392204038141222505">Diagram::yGrid</a>) -- ligne_inter_y;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            points &lt;&lt; QPointF(depart.x(), ligne_inter_y);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            points &lt;&lt; QPointF(arrivee.x(), ligne_inter_y);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a> &amp;&amp; (ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a> || ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a>)) || (ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37">Qet::South</a> &amp;&amp; ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a>)) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">// cas &quot;4&quot;</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordtype">int</span> ligne_inter_x = qRound(depart.x() + arrivee.x()) / 2;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">while</span> (ligne_inter_x % <a class="code" href="../../da/d91/classDiagram.html#a8bcc3268e7dd96d8347cb402b4c964c6">Diagram::xGrid</a>) -- ligne_inter_x;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            points &lt;&lt; QPointF(ligne_inter_x, depart.y());</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            points &lt;&lt; QPointF(ligne_inter_x, arrivee.y());</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a> || ori_depart == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a>) &amp;&amp; (ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a> || ori_arrivee == <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a>)) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            points &lt;&lt; QPointF(depart.x(), arrivee.y()); <span class="comment">// cas &quot;2&quot;</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            points &lt;&lt; QPointF(arrivee.x(), depart.y()); <span class="comment">// cas &quot;1&quot;</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// fin du vrai trajet</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    points &lt;&lt; arrivee;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// prolongement de la borne d&#39;arrivee</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    points &lt;&lt; arrivee0;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// inverse eventuellement l&#39;ordre des points afin que le trajet soit exprime de la borne 1 vers la borne 2</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (newp1.x() &gt; newp2.x()) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        QList&lt;QPointF&gt; points2;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = points.size() - 1 ; i &gt;= 0 ; -- i) points2 &lt;&lt; points.at(i);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        points = points2;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a44995cef34e660c9c5b2349d97d18029">pointsToSegments</a>(points);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ae179dfb31032f55b10d9a3200aa15acf">segmentsToPath</a>();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a8c48237171938b9962367c2af665d92f">  449</a></span>&#160;QPointF <a class="code" href="../../d3/d84/classConductor.html#a8c48237171938b9962367c2af665d92f">Conductor::extendTerminal</a>(<span class="keyword">const</span> QPointF &amp;terminal, <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88">Qet::Orientation</a> terminal_orientation, qreal ext_size) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    QPointF extended_terminal;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">switch</span>(terminal_orientation) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a>:</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            extended_terminal = QPointF(terminal.x(), terminal.y() - ext_size);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a>:</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            extended_terminal = QPointF(terminal.x() + ext_size, terminal.y());</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37">Qet::South</a>:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            extended_terminal = QPointF(terminal.x(), terminal.y() + ext_size);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a>:</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            extended_terminal = QPointF(terminal.x() - ext_size, terminal.y());</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">default</span>: extended_terminal = terminal;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">return</span>(extended_terminal);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ace529b961efd74335176878d22699add">  475</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ace529b961efd74335176878d22699add">Conductor::paint</a>(QPainter *qp, <span class="keyword">const</span> QStyleOptionGraphicsItem *options, QWidget *qw)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;{</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    Q_UNUSED(qw);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    qp -&gt; save();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    qp -&gt; setRenderHint(QPainter::Antialiasing, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">// Set the color of conductor</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    QColor final_conductor_color(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a66863b6082368ad72bc2f593774787d5">color</a>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a8e1b9e04db1bc058bb5c7d9755eff693">must_highlight_</a> == <a class="code" href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5a64ee154dab513cd322c58a15e4818ebe">Normal</a>) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        final_conductor_color = QColor::fromRgb(69, 137, 255, 255);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a8e1b9e04db1bc058bb5c7d9755eff693">must_highlight_</a> == <a class="code" href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5a69e3d7d6cf2d63767cebc541bab21a6f">Alert</a>) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        final_conductor_color =QColor::fromRgb(255, 69, 0, 255);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isSelected()) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        final_conductor_color = Qt::red;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d91/classDiagram.html">Diagram</a> *parent_diagram = <a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>()) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span> (!parent_diagram -&gt; drawColoredConductors()) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                final_conductor_color = Qt::black;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="comment">//Draw the conductor bigger when is hovered</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.setWidthF(<a class="code" href="../../d3/d84/classConductor.html#ab42995a924568fbce27990580ded2eeb">m_mouse_over</a>? (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a635bb7edda029f842c57f06449643636">cond_size</a>) +4 : (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a635bb7edda029f842c57f06449643636">cond_size</a>));</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">//Set the QPen and QBrush to the QPainter</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    qp -&gt; setBrush(<a class="code" href="../../d3/d84/classConductor.html#af36e7c8376f8603a9b6ec13d50438ab9">conductor_brush</a>);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    QPen final_conductor_pen = <a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="comment">//Set the conductor style</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    final_conductor_pen.setColor(final_conductor_color);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    final_conductor_pen.setStyle(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#abbf0e0a7bd1ed08882854411eaaad093">style</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    final_conductor_pen.setJoinStyle(Qt::SvgMiterJoin); <span class="comment">// better rendering with dot</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">//Use a cosmetique line, below a certain zoom</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (options &amp;&amp; options -&gt; levelOfDetail &lt; 1.0) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        final_conductor_pen.setCosmetic(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    qp -&gt; setPen(final_conductor_pen);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">//Draw the conductor</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    qp -&gt; drawPath(<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>());</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="comment">//Draw the second color</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a46fed7414c993b78117a5a916cb1d7f6">m_bicolor</a>)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        final_conductor_pen.setColor(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a46fac82e5a8cf63d5f12f755139af309">m_color_2</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        final_conductor_pen.setStyle(Qt::CustomDashLine);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        QVector&lt;qreal&gt; dash_pattern;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        dash_pattern &lt;&lt; <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a428e3107593efa5b0bc4481485fb7fa6">m_dash_size</a>-2 &lt;&lt; <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a428e3107593efa5b0bc4481485fb7fa6">m_dash_size</a>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        final_conductor_pen.setDashPattern(dash_pattern);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        qp-&gt;save();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        qp-&gt;setPen(final_conductor_pen);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        qp-&gt;drawPath(<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>());</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        qp-&gt;restore();</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a6e199bba0474fcef619c8f13ff737604">type</a> == <a class="code" href="../../d4/d0b/classConductorProperties.html#af1439a082eeac27037086dc36b96a1ada8094aff20c96bf2e0cb996989762c5ab">ConductorProperties::Single</a>) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        qp -&gt; setBrush(final_conductor_color);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#aec73021c704d5f0643de9bf93338307e">singleLineProperties</a>.<a class="code" href="../../d9/d59/classSingleLineProperties.html#a1f16a53d9a5818522c88e31f0270e4ec">draw</a>(</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            qp,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a70258ed0503b873d68d9f80e91c202bb">middleSegment</a>() -&gt; isHorizontal() ? <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a59a5666d61c720bfe380711bbf4327e5">QET::Horizontal</a> : <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a1b078af10b3c6f1432907bd97d71a7d9">QET::Vertical</a>,</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            QRectF(<a class="code" href="../../d3/d84/classConductor.html#a70258ed0503b873d68d9f80e91c202bb">middleSegment</a>() -&gt; middle() - QPointF(12.0, 12.0), QSizeF(24.0, 24.0))</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        );</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span> (isSelected()) qp -&gt; setBrush(Qt::NoBrush);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment">//Draw the junctions</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    QList&lt;QPointF&gt; junctions_list = <a class="code" href="../../d3/d84/classConductor.html#ade9164e49ea74c88d522ec8227f67944">junctions</a>();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (!junctions_list.isEmpty()) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        final_conductor_pen.setStyle(Qt::SolidLine);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        QBrush junction_brush(final_conductor_color, Qt::SolidPattern);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        qp -&gt; setPen(final_conductor_pen);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        qp -&gt; setBrush(junction_brush);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        qp -&gt; setRenderHint(QPainter::Antialiasing, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">foreach</span>(QPointF point, junctions_list) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            qp -&gt; drawEllipse(QRectF(point.x() - 1.5, point.y() - 1.5, 3.0, 3.0));</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    qp -&gt; restore();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">  559</a></span>&#160;<a class="code" href="../../da/d91/classDiagram.html">Diagram</a> *<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">Conductor::diagram</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span>(qobject_cast&lt;Diagram *&gt;(scene()));</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ad3546c9cc056283d1b8b64ba0660f8ab">  566</a></span>&#160;<a class="code" href="../../da/d11/classConductorTextItem.html">ConductorTextItem</a> *<a class="code" href="../../d3/d84/classConductor.html#ad3546c9cc056283d1b8b64ba0660f8ab">Conductor::textItem</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aefaa9decb5b8c78c27b2673c2950d633">  575</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d84/classConductor.html#aefaa9decb5b8c78c27b2673c2950d633">Conductor::valideXml</a>(QDomElement &amp;e){</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// verifie le nom du tag</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (e.tagName() != <span class="stringliteral">&quot;conductor&quot;</span>) <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// verifie la presence des attributs minimaux</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (!e.hasAttribute(<span class="stringliteral">&quot;terminal1&quot;</span>)) <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (!e.hasAttribute(<span class="stringliteral">&quot;terminal2&quot;</span>)) <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordtype">bool</span> conv_ok;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// parse l&#39;abscisse</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (e.hasAttribute(<span class="stringliteral">&quot;element1&quot;</span>)) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">if</span> (QUuid(e.attribute(<span class="stringliteral">&quot;element1&quot;</span>)).isNull())</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (QUuid(e.attribute(<span class="stringliteral">&quot;terminal1&quot;</span>)).isNull())</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        e.attribute(<span class="stringliteral">&quot;terminal1&quot;</span>).toInt(&amp;conv_ok);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span> (!conv_ok) <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// parse l&#39;ordonnee</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span> (e.hasAttribute(<span class="stringliteral">&quot;element2&quot;</span>)) {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">if</span> (QUuid(e.attribute(<span class="stringliteral">&quot;element2&quot;</span>)).isNull())</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">if</span> (QUuid(e.attribute(<span class="stringliteral">&quot;terminal2&quot;</span>)).isNull())</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        e.attribute(<span class="stringliteral">&quot;terminal2&quot;</span>).toInt(&amp;conv_ok);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span> (!conv_ok) <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aa50d07a5bf563b2638a1f817dae9e5ee">  613</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#aa50d07a5bf563b2638a1f817dae9e5ee">Conductor::mouseDoubleClickEvent</a>(QGraphicsSceneMouseEvent *event) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keyword">event</span>-&gt;accept();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ac6b418b398cbb61a5c73b5136b99c050">editProperty</a>();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#af64c0e2865fdceab4fe33467c06d7f1c">  623</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#af64c0e2865fdceab4fe33467c06d7f1c">Conductor::mousePressEvent</a>(QGraphicsSceneMouseEvent *event)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    QGraphicsObject::mousePressEvent(event);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span> (event-&gt;modifiers() &amp; Qt::ControlModifier)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        setSelected(!isSelected());</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a5707add67d3f3f37633b2b6e7c4d131e">  635</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a5707add67d3f3f37633b2b6e7c4d131e">Conductor::mouseReleaseEvent</a>(QGraphicsSceneMouseEvent *event)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;{</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (!(event -&gt; modifiers() &amp; Qt::ControlModifier))</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        QGraphicsObject::mouseReleaseEvent(event);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a36f1eb1f19fc9e8847a88d77c43f69b2">  646</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a36f1eb1f19fc9e8847a88d77c43f69b2">Conductor::hoverEnterEvent</a>(QGraphicsSceneHoverEvent *event) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    Q_UNUSED(event);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab42995a924568fbce27990580ded2eeb">m_mouse_over</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    update();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a920f3ae309c17848d078cb69e54e5cbd">  657</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a920f3ae309c17848d078cb69e54e5cbd">Conductor::hoverLeaveEvent</a>(QGraphicsSceneHoverEvent *event) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    Q_UNUSED(event);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    update();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab42995a924568fbce27990580ded2eeb">m_mouse_over</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a5a61e13a2d1cb44526277798884a0b8b">  669</a></span>&#160;QVariant <a class="code" href="../../d3/d84/classConductor.html#a5a61e13a2d1cb44526277798884a0b8b">Conductor::itemChange</a>(GraphicsItemChange change, <span class="keyword">const</span> QVariant &amp;value)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (change == QGraphicsItem::ItemSelectedChange)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="keywordflow">if</span> (value.toBool())</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a910b9c82821697e07931e212a4ab3891">m_previous_z_value</a> = zValue();</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            setZValue(qAbs(<a class="code" href="../../d3/d84/classConductor.html#a910b9c82821697e07931e212a4ab3891">m_previous_z_value</a>) + 10000);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#afb3100d2ff5431340611d058be72f3dd">addHandler</a>();</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            setZValue(<a class="code" href="../../d3/d84/classConductor.html#a910b9c82821697e07931e212a4ab3891">m_previous_z_value</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">removeHandler</a>();</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (change == QGraphicsItem::ItemSceneHasChanged)</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">if</span>(!scene())</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">removeHandler</a>();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scene() &amp;&amp; isSelected())</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#afb3100d2ff5431340611d058be72f3dd">addHandler</a>();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (change == QGraphicsItem::ItemVisibleHasChanged) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (change == QGraphicsItem::ItemPositionHasChanged &amp;&amp; isSelected()) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ad061b78a3976c1b05f05f839fcb00cde">adjusteHandlerPos</a>();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">return</span>(QGraphicsObject::itemChange(change, value));</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a0fcc485fbf5c2fd54c857ac2ea69ab56">  710</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d84/classConductor.html#a0fcc485fbf5c2fd54c857ac2ea69ab56">Conductor::sceneEventFilter</a>(QGraphicsItem *watched, QEvent *event)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;{</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="comment">//Watched must be an handler</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span>(watched-&gt;type() == <a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html#a2267c547e216942fad72639c6e1de06fa6aecc5d12fce4be4a17f2dbbc941e8ae">QetGraphicsHandlerItem::Type</a>)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html">QetGraphicsHandlerItem</a> *qghi = qgraphicsitem_cast&lt;QetGraphicsHandlerItem *&gt;(watched);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.contains(qghi)) <span class="comment">//Handler must be in m_vector_index, then we can start resize</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a472d563b43401a6ff84433310fd94059">m_vector_index</a> = <a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.indexOf(qghi);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a472d563b43401a6ff84433310fd94059">m_vector_index</a> != -1)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                <span class="keywordflow">if</span>(event-&gt;type() == QEvent::GraphicsSceneMousePress) <span class="comment">//Click</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#aeec4450e97f07bc47cd0ff2586f44578">handlerMousePressEvent</a>(qghi, <span class="keyword">static_cast&lt;</span>QGraphicsSceneMouseEvent *<span class="keyword">&gt;</span>(event));</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(event-&gt;type() == QEvent::GraphicsSceneMouseMove) <span class="comment">//Move</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#ad89a22b06b1849b5726e76541788744c">handlerMouseMoveEvent</a>(qghi, <span class="keyword">static_cast&lt;</span>QGraphicsSceneMouseEvent *<span class="keyword">&gt;</span>(event));</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event-&gt;type() == QEvent::GraphicsSceneMouseRelease) <span class="comment">//Release</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#a3f2a923b69927a1477da3017af7c6fce">handlerMouseReleaseEvent</a>(qghi, <span class="keyword">static_cast&lt;</span>QGraphicsSceneMouseEvent *<span class="keyword">&gt;</span>(event));</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event-&gt;type() == QEvent::GraphicsSceneMouseDoubleClick) <span class="comment">//Double click</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#ac6b418b398cbb61a5c73b5136b99c050">editProperty</a>();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ad061b78a3976c1b05f05f839fcb00cde">  753</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ad061b78a3976c1b05f05f839fcb00cde">Conductor::adjusteHandlerPos</a>()</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;{</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.isEmpty())</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.size() == <a class="code" href="../../d3/d84/classConductor.html#a9a90b13a4ecbff5790c8f82f6231f99d">handlerPoints</a>().size())</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        QVector &lt;QPointF&gt; points_vector = mapToScene(<a class="code" href="../../d3/d84/classConductor.html#a9a90b13a4ecbff5790c8f82f6231f99d">handlerPoints</a>());</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; points_vector.size() ; ++i)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.at(i)-&gt;setPos(points_vector.at(i));</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aeec4450e97f07bc47cd0ff2586f44578">  771</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#aeec4450e97f07bc47cd0ff2586f44578">Conductor::handlerMousePressEvent</a>(<a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html">QetGraphicsHandlerItem</a> *qghi, QGraphicsSceneMouseEvent *event)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;{</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    Q_UNUSED(event);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="comment">//we get the segment corresponding to the handler</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a472d563b43401a6ff84433310fd94059">m_vector_index</a> &gt; -1)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        qghi-&gt;<a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html#a77c6a8b97a188bf55d800417fa0a2ba2">setColor</a>(Qt::cyan);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ae2a6458dc6a6f8f8fefec4581a80c107">m_moving_segment</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ac98d5b6538ebfde79cf8742eecec96a6">m_moved_segment</a> = <a class="code" href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96">segmentsList</a>().at(<a class="code" href="../../d3/d84/classConductor.html#a472d563b43401a6ff84433310fd94059">m_vector_index</a>+1);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ac45a028d155b9996b29d048c6c4a2550">before_mov_text_pos_</a> = <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; <a class="code" href="../../d3/d84/classConductor.html#a5f3938c409d36029c1ccd22f0b9bca8b">pos</a>();</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">for</span>(<a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html">QetGraphicsHandlerItem</a> *handler : <a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="keywordflow">if</span>(handler != qghi)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                handler-&gt;hide();</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;}</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ad89a22b06b1849b5726e76541788744c">  794</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ad89a22b06b1849b5726e76541788744c">Conductor::handlerMouseMoveEvent</a>(<a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html">QetGraphicsHandlerItem</a> *qghi, QGraphicsSceneMouseEvent *event)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;{</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ae2a6458dc6a6f8f8fefec4581a80c107">m_moving_segment</a>)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="comment">//Snap the mouse pos to grid</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        QPointF pos_ = <a class="code" href="../../da/d91/classDiagram.html#aca79c4ab46b3b8d3869affb2344253e8">Diagram::snapToGrid</a>(mapFromScene(event-&gt;scenePos()));</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="comment">//Position of the last point</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        QPointF p = <a class="code" href="../../d3/d84/classConductor.html#ac98d5b6538ebfde79cf8742eecec96a6">m_moved_segment</a> -&gt; middle();</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="comment">//Calcul the movement</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ac98d5b6538ebfde79cf8742eecec96a6">m_moved_segment</a> -&gt; moveX(pos_.x() - p.x());</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ac98d5b6538ebfde79cf8742eecec96a6">m_moved_segment</a> -&gt; moveY(pos_.y() - p.y());</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="comment">//Apply the movement</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a015b1f66cea917ce4959e64d5f66b3d6">has_to_save_profile</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ae179dfb31032f55b10d9a3200aa15acf">segmentsToPath</a>();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        qghi-&gt;setPos(mapToScene(<a class="code" href="../../d3/d84/classConductor.html#ac98d5b6538ebfde79cf8742eecec96a6">m_moved_segment</a>-&gt;<a class="code" href="../../dc/d5b/classConductorSegment.html#a35228a00501c2a046076c58e4642c255">middle</a>()));</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a3f2a923b69927a1477da3017af7c6fce">  822</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a3f2a923b69927a1477da3017af7c6fce">Conductor::handlerMouseReleaseEvent</a>(<a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html">QetGraphicsHandlerItem</a> *qghi, QGraphicsSceneMouseEvent *event)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;{</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    Q_UNUSED(event);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    Q_UNUSED(qghi);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a472d563b43401a6ff84433310fd94059">m_vector_index</a> = -1;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ae2a6458dc6a6f8f8fefec4581a80c107">m_moving_segment</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a015b1f66cea917ce4959e64d5f66b3d6">has_to_save_profile</a>)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ac6a16f9e398282ceb21a1f9af2811cc3">saveProfile</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a015b1f66cea917ce4959e64d5f66b3d6">has_to_save_profile</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="comment">//When handler is released, the conductor can have more segment than befor the handler was moved</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="comment">//then we remove all handles and new ones are added</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">removeHandler</a>();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#afb3100d2ff5431340611d058be72f3dd">addHandler</a>();</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;}</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#afb3100d2ff5431340611d058be72f3dd">  845</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#afb3100d2ff5431340611d058be72f3dd">Conductor::addHandler</a>()</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;{</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.isEmpty() &amp;&amp; scene())</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    {       </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a> = <a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html#a27ff7e1e214f07ada35dce0d79dc58a2">QetGraphicsHandlerItem::handlerForPoint</a>(mapToScene(<a class="code" href="../../d3/d84/classConductor.html#a9a90b13a4ecbff5790c8f82f6231f99d">handlerPoints</a>()));</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">for</span>(<a class="code" href="../../de/df5/classQetGraphicsHandlerItem.html">QetGraphicsHandlerItem</a> *handler : <a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            handler-&gt;setColor(Qt::blue);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            scene()-&gt;addItem(handler);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            handler-&gt;installSceneEventFilter(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            handler-&gt;setZValue(this-&gt;zValue()+1);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;}</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">  865</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">Conductor::removeHandler</a>()</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;{</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.isEmpty())</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        qDeleteAll(<a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">m_handler_vector</a>.clear();</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a649d3839caef33cd2d47759f82e68a08">  878</a></span>&#160;QRectF <a class="code" href="../../d3/d84/classConductor.html#a649d3839caef33cd2d47759f82e68a08">Conductor::boundingRect</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    QRectF <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#af5e509afc46ed28dd2f2092b01e6b227">br</a> = <a class="code" href="../../d3/d84/classConductor.html#a9a17e0e7c33d5963b336be63133f7bd0">shape</a>().boundingRect();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#af5e509afc46ed28dd2f2092b01e6b227">br</a>.adjusted(-10, -10, 10, 10);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a9a17e0e7c33d5963b336be63133f7bd0">  889</a></span>&#160;QPainterPath <a class="code" href="../../d3/d84/classConductor.html#a9a17e0e7c33d5963b336be63133f7bd0">Conductor::shape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    QPainterPathStroker pps;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    pps.setWidth(<a class="code" href="../../d3/d84/classConductor.html#ab42995a924568fbce27990580ded2eeb">m_mouse_over</a>? 5 : 1);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    pps.setJoinStyle(<a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.joinStyle());</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    QPainterPath shape_(pps.createStroke(<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>()));</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">return</span> shape_;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a6f60f9f146fd142ee57b84084c843409">  904</a></span>&#160;QPainterPath <a class="code" href="../../d3/d84/classConductor.html#a6f60f9f146fd142ee57b84084c843409">Conductor::nearShape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    QPainterPathStroker pps;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    pps.setWidth(1300);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    pps.setJoinStyle(<a class="code" href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">conductor_pen</a>.joinStyle());</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">return</span> pps.createStroke(<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>());</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a3c7bd8e59efaa5f9c9a02f37ade90555">  916</a></span>&#160;uint <a class="code" href="../../d3/d84/classConductor.html#a3c7bd8e59efaa5f9c9a02f37ade90555">Conductor::segmentsCount</a>(<a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339">QET::ConductorSegmentType</a> <a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    QList&lt;ConductorSegment *&gt; segments_list = <a class="code" href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96">segmentsList</a>();</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a> == <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a32994dd97504d378777f3cdddcf4c2dd">QET::Both</a>) <span class="keywordflow">return</span>(segments_list.count());</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    uint nb_seg = 0;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">foreach</span>(<a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *conductor_segment, segments_list) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">if</span> (conductor_segment -&gt; <a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a>() == <a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a>) ++ nb_seg;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">return</span>(nb_seg);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;}</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a99f9ea9c0fd0fc783fd0c6c7ac276205">  930</a></span>&#160;QList&lt;QPointF&gt; <a class="code" href="../../d3/d84/classConductor.html#a99f9ea9c0fd0fc783fd0c6c7ac276205">Conductor::segmentsToPoints</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// liste qui sera retournee</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    QList&lt;QPointF&gt; points_list;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// on retourne la liste tout de suite s&#39;il n&#39;y a pas de segments</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>(points_list);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">// recupere le premier point</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    points_list &lt;&lt; <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> -&gt; firstPoint();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="comment">// parcourt les segments pour recuperer les autres points</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment = <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">while</span>(segment -&gt; hasNextSegment()) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        points_list &lt;&lt; segment -&gt; secondPoint();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        segment = segment -&gt; nextSegment();</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="comment">// recupere le dernier point</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    points_list &lt;&lt; segment -&gt; secondPoint();</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">//retourne la liste</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">return</span>(points_list);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;}</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a44995cef34e660c9c5b2349d97d18029">  958</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a44995cef34e660c9c5b2349d97d18029">Conductor::pointsToSegments</a>(<span class="keyword">const</span> QList&lt;QPointF&gt;&amp; points_list) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// supprime les segments actuels</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a4406a6201746cf192c00662d464c7c0c">deleteSegments</a>();</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// cree les segments a partir de la liste de points</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *last_segment = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; points_list.size() - 1 ; ++ i) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        last_segment = <span class="keyword">new</span> <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a>(points_list.at(i), points_list.at(i + 1), last_segment);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">if</span> (!i) <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> = last_segment;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a74db48e53dcea4e31d4b16b8c6bc7ce7">  976</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d84/classConductor.html#a74db48e53dcea4e31d4b16b8c6bc7ce7">Conductor::fromXml</a>(QDomElement &amp;dom_element)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;{</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    setPos(dom_element.attribute(<span class="stringliteral">&quot;x&quot;</span>, <span class="keyword">nullptr</span>).toDouble(),</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;           dom_element.attribute(<span class="stringliteral">&quot;y&quot;</span>, <span class="keyword">nullptr</span>).toDouble());</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordtype">bool</span> return_ = <a class="code" href="../../d3/d84/classConductor.html#a101f284e97dd2da6be533e776959e2e7">pathFromXml</a>(dom_element);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; <a class="code" href="../../d3/d84/classConductor.html#a74db48e53dcea4e31d4b16b8c6bc7ce7">fromXml</a>(dom_element);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a> pr;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    pr.<a class="code" href="../../d4/d0b/classConductorProperties.html#a7ac32f27f9287cebb1e5c2c328d22758">fromXml</a>(dom_element);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="comment">//Load Sequential Values</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> (dom_element.hasAttribute(<span class="stringliteral">&quot;sequ_1&quot;</span>) || dom_element.hasAttribute(<span class="stringliteral">&quot;sequf_1&quot;</span>) || dom_element.hasAttribute(<span class="stringliteral">&quot;seqt_1&quot;</span>) || dom_element.hasAttribute(<span class="stringliteral">&quot;seqtf_1&quot;</span>) || dom_element.hasAttribute(<span class="stringliteral">&quot;seqh_1&quot;</span>) || dom_element.hasAttribute(<span class="stringliteral">&quot;sequf_1&quot;</span>))</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <a class="code" href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">ConductorXmlRetroCompatibility::loadSequential</a>(dom_element, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a07c8275e0b9f492d00bbaa489a5bbb7e">m_autoNum_seq</a>.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#aed1a6490738c5df7db003b96c75a221a">fromXml</a>(dom_element.firstChildElement(<span class="stringliteral">&quot;sequentialNumbers&quot;</span>));</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">m_freeze_label</a> = dom_element.attribute(<span class="stringliteral">&quot;freezeLabel&quot;</span>) == <span class="stringliteral">&quot;true&quot;</span>? true : <span class="keyword">false</span>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">setProperties</a>(pr);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">return</span> return_;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a4444fdcc547f1c78a62254a3dad0a4fd"> 1010</a></span>&#160;QDomElement <a class="code" href="../../d3/d84/classConductor.html#a4444fdcc547f1c78a62254a3dad0a4fd">Conductor::toXml</a>(QDomDocument &amp;dom_document,</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                 QHash&lt;<a class="code" href="../../d9/ded/classTerminal.html">Terminal</a> *,</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                 <span class="keywordtype">int</span>&gt; &amp;table_adr_id)<span class="keyword"> const</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    QDomElement dom_element = dom_document.createElement(<span class="stringliteral">&quot;conductor&quot;</span>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    dom_element.setAttribute(<span class="stringliteral">&quot;x&quot;</span>, QString::number(<a class="code" href="../../d3/d84/classConductor.html#a5f3938c409d36029c1ccd22f0b9bca8b">pos</a>().x()));</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    dom_element.setAttribute(<span class="stringliteral">&quot;y&quot;</span>, QString::number(<a class="code" href="../../d3/d84/classConductor.html#a5f3938c409d36029c1ccd22f0b9bca8b">pos</a>().y()));</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">// Terminal is uniquely identified by the uuid of the terminal and the element</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#ac340d783725154a9f4bca74588ec3209">uuid</a>().isNull()) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="comment">// legacy method to identify the terminal</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;terminal1&quot;</span>, table_adr_id.value(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a>)); <span class="comment">// for backward compability</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;element1&quot;</span>, <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#aac01ad77bc72ce5406f9397bfcb656da">parentElement</a>()-&gt;<a class="code" href="../../d5/d3c/classElement.html#a873eecea89b2cdb02b740beabd2e36c6">uuid</a>().toString());</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;terminal1&quot;</span>, <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#ac340d783725154a9f4bca74588ec3209">uuid</a>().toString());</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#ac340d783725154a9f4bca74588ec3209">uuid</a>().isNull()) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="comment">// legacy method to identify the terminal</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;terminal2&quot;</span>, table_adr_id.value(<a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>)); <span class="comment">// for backward compability</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;element2&quot;</span>, <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#aac01ad77bc72ce5406f9397bfcb656da">parentElement</a>()-&gt;<a class="code" href="../../d5/d3c/classElement.html#a873eecea89b2cdb02b740beabd2e36c6">uuid</a>().toString());</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;terminal2&quot;</span>, <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#ac340d783725154a9f4bca74588ec3209">uuid</a>().toString());</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    dom_element.setAttribute(<span class="stringliteral">&quot;freezeLabel&quot;</span>, <a class="code" href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">m_freeze_label</a>? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// on n&#39;exporte les segments du conducteur que si ceux-ci ont</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// ete modifies par l&#39;utilisateur</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a>)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="comment">// parcours et export des segments</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        QDomElement current_segment;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">foreach</span>(<a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment, <a class="code" href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96">segmentsList</a>())</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            current_segment = dom_document.createElement(<span class="stringliteral">&quot;segment&quot;</span>);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            current_segment.setAttribute(<span class="stringliteral">&quot;orientation&quot;</span>, segment -&gt; isHorizontal() ? <span class="stringliteral">&quot;horizontal&quot;</span> : <span class="stringliteral">&quot;vertical&quot;</span>);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            current_segment.setAttribute(<span class="stringliteral">&quot;length&quot;</span>, QString(<span class="stringliteral">&quot;%1&quot;</span>).arg(segment -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>()));</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            dom_element.appendChild(current_segment);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    QDomElement dom_seq = <a class="code" href="../../d3/d84/classConductor.html#a07c8275e0b9f492d00bbaa489a5bbb7e">m_autoNum_seq</a>.<a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a287cc81d6e568683a24cab6e6a2e8c82">toXml</a>(dom_document);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    dom_element.appendChild(dom_seq);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <span class="comment">// Export the properties and text</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>. <a class="code" href="../../d3/d84/classConductor.html#a4444fdcc547f1c78a62254a3dad0a4fd">toXml</a>(dom_element);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../da/d11/classConductorTextItem.html#aa034d0138c794cc3b05e2b1d31e12a44">wasMovedByUser</a>())</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;userx&quot;</span>, QString::number(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;pos().x()));</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;usery&quot;</span>, QString::number(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;pos().y()));</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../da/d11/classConductorTextItem.html#a6689930383cb2519c54effef590abe58">wasRotateByUser</a>())</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        dom_element.setAttribute(<span class="stringliteral">&quot;rotation&quot;</span>, QString::number(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;rotation()));</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">return</span>(dom_element);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;}</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a101f284e97dd2da6be533e776959e2e7"> 1075</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d3/d84/classConductor.html#a101f284e97dd2da6be533e776959e2e7">Conductor::pathFromXml</a>(<span class="keyword">const</span> QDomElement &amp;e) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">// parcourt les elements XML &quot;segment&quot; et en extrait deux listes de longueurs</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="comment">// les segments non valides sont ignores</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    QList&lt;qreal&gt; segments_x, segments_y;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">for</span> (QDomNode node = e.firstChild() ; !node.isNull() ; node = node.nextSibling()) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="comment">// on s&#39;interesse aux elements XML &quot;segment&quot;</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        QDomElement current_segment = node.toElement();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">if</span> (current_segment.isNull() || current_segment.tagName() != <span class="stringliteral">&quot;segment&quot;</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="comment">// le segment doit avoir une longueur</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">if</span> (!current_segment.hasAttribute(<span class="stringliteral">&quot;length&quot;</span>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="comment">// cette longueur doit etre un reel</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordtype">bool</span> ok;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        qreal segment_length = current_segment.attribute(<span class="stringliteral">&quot;length&quot;</span>).toDouble(&amp;ok);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">if</span> (!ok) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">if</span> (current_segment.attribute(<span class="stringliteral">&quot;orientation&quot;</span>) == <span class="stringliteral">&quot;horizontal&quot;</span>) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            segments_x &lt;&lt; segment_length;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            segments_y &lt;&lt; 0.0;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            segments_x &lt;&lt; 0.0;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            segments_y &lt;&lt; segment_length;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="comment">//If there isn&#39;t segment we generate automatic path and return true</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">if</span> (!segments_x.size()) {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">generateConductorPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">return</span>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="comment">// les longueurs recueillies doivent etre coherentes avec les positions des bornes</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    qreal width = 0.0, height = 0.0;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">foreach</span> (qreal t, segments_x) width  += t;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">foreach</span> (qreal t, segments_y) height += t;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    QPointF t1 = <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor();</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    QPointF t2 = <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor();</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    qreal expected_width  = t2.x() - t1.x();</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    qreal expected_height = t2.y() - t1.y();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">// on considere que le trajet est incoherent a partir d&#39;une unite de difference avec l&#39;espacement entre les bornes</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">if</span> (</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        qAbs(expected_width  - width)  &gt; 1.0 ||</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        qAbs(expected_height - height) &gt; 1.0</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    ) {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Conductor::fromXml : les segments du conducteur ne semblent pas coherents - utilisation d&#39;un trajet automatique&quot;</span>;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">/* on recree les segments a partir des donnes XML */</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// cree la liste de points</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    QList&lt;QPointF&gt; points_list;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    points_list &lt;&lt; mapFromScene(t1);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; segments_x.size() ; ++ i) {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        points_list &lt;&lt; QPointF(</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            points_list.last().x() + segments_x.at(i),</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            points_list.last().y() + segments_y.at(i)</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        );</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a44995cef34e660c9c5b2349d97d18029">pointsToSegments</a>(points_list);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="comment">// initialise divers parametres lies a la modification des conducteurs</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ac6a16f9e398282ceb21a1f9af2811cc3">saveProfile</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ae179dfb31032f55b10d9a3200aa15acf">segmentsToPath</a>();</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">return</span>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a9a90b13a4ecbff5790c8f82f6231f99d"> 1153</a></span>&#160;QVector&lt;QPointF&gt; <a class="code" href="../../d3/d84/classConductor.html#a9a90b13a4ecbff5790c8f82f6231f99d">Conductor::handlerPoints</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    QList &lt;ConductorSegment *&gt; <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a> = <a class="code" href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96">segmentsList</a>();</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a>.size() &gt;= 3)</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a>.removeFirst();</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a>.removeLast();</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    QVector &lt;QPointF&gt; middle_points;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">foreach</span>(<a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment, <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a>)</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        middle_points.append(segment-&gt;<a class="code" href="../../dc/d5b/classConductorSegment.html#a35228a00501c2a046076c58e4642c255">middle</a>());</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">return</span> middle_points;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96"> 1171</a></span>&#160;<span class="keyword">const</span> QList&lt;ConductorSegment *&gt; <a class="code" href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96">Conductor::segmentsList</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>(QList&lt;ConductorSegment *&gt;());</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    QList&lt;ConductorSegment *&gt; segments_vector;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment = <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">while</span> (segment -&gt; hasNextSegment()) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        segments_vector &lt;&lt; segment;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        segment = segment -&gt; nextSegment();</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    segments_vector &lt;&lt; segment;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">return</span>(segments_vector);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18"> 1189</a></span>&#160;qreal <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">Conductor::length</a>()<span class="keyword"> const</span>{</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>().length();</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a70258ed0503b873d68d9f80e91c202bb"> 1196</a></span>&#160;<a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *<a class="code" href="../../d3/d84/classConductor.html#a70258ed0503b873d68d9f80e91c202bb">Conductor::middleSegment</a>() {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    qreal half_length = <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>() / 2.0;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *s = <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    qreal l = 0;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">while</span> (s -&gt; hasNextSegment()) {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        l += qAbs(s -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>());</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        <span class="keywordflow">if</span> (l &gt;= half_length) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        s = s -&gt; nextSegment();</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="comment">// s est le segment qui contient le point au milieu du conducteur</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">return</span>(s);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;}</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ab32bd11b8874c7b45d1127c640477218"> 1219</a></span>&#160;QPointF <a class="code" href="../../d3/d84/classConductor.html#ab32bd11b8874c7b45d1127c640477218">Conductor::posForText</a>(<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#ae10a7bcb8302c45b0fb16eed785b4ead">Qt::Orientations</a> &amp;flag)</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;{</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment      = <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordtype">bool</span> all_segment_is_vertical   = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordtype">bool</span> all_segment_is_horizontal = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="comment">//Go to first segement</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="keywordflow">while</span> (!segment-&gt;<a class="code" href="../../dc/d5b/classConductorSegment.html#ae487262ea29ceb538015805470591d60">isFirstSegment</a>()) {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        segment = segment-&gt;<a class="code" href="../../dc/d5b/classConductorSegment.html#aeb8047230822998b478445073624bea9">previousSegment</a>();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    QPointF p1 = segment -&gt; firstPoint(); <span class="comment">//&lt;First point of conductor</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *biggest_segment = segment; <span class="comment">//&lt;biggest segment: contain the longest segment of conductor.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">if</span> (segment -&gt; firstPoint().x() != segment -&gt; secondPoint().x())</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        all_segment_is_vertical   = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span> (segment -&gt; firstPoint().y() != segment -&gt; secondPoint().y())</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        all_segment_is_horizontal = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">while</span> (segment -&gt; hasNextSegment())</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        segment = segment -&gt; nextSegment();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">if</span> (segment -&gt; firstPoint().x() != segment -&gt; secondPoint().x())</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            all_segment_is_vertical   = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">if</span> (segment -&gt; firstPoint().y() != segment -&gt; secondPoint().y())</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            all_segment_is_horizontal = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <span class="comment">//We must to compare length segment, but they can be negative</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="comment">//so we multiply by -1 to make it positive.</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="keywordtype">int</span> saved = biggest_segment -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>();</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="keywordflow">if</span> (saved &lt; 0) saved *= -1;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="keywordtype">int</span> curent = segment-&gt;<a class="code" href="../../dc/d5b/classConductorSegment.html#a5ddcdf5405e5a01ec08f8e14a33db742">length</a>();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">if</span> (curent &lt; 0) curent *= -1;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <span class="keywordflow">if</span> (curent &gt; saved) biggest_segment = segment;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    }</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160; </div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    QPointF p2 = segment -&gt; secondPoint();<span class="comment">//&lt;Last point of conductor</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="comment">//If the conductor is horizontal or vertical</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">//Return the point at the middle of conductor</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (all_segment_is_vertical) { <span class="comment">//&lt;Vertical</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        flag = <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a1b078af10b3c6f1432907bd97d71a7d9">Qt::Vertical</a>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <span class="keywordflow">if</span> (p1.y() &gt; p2.y()) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            p1.setY(p1.y() - (<a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>()/2));</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            p1.setY(p1.y() + (<a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>()/2));</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (all_segment_is_horizontal) { <span class="comment">//&lt;Horizontal</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        flag = <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a59a5666d61c720bfe380711bbf4327e5">Qt::Horizontal</a>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">if</span> (p1.x() &gt; p2.x()) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            p1.setX(p1.x() - (<a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>()/2));</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            p1.setX(p1.x() + (<a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>()/2));</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">//Return the point at the middle of biggest segment.</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        p1 = biggest_segment-&gt;<a class="code" href="../../dc/d5b/classConductorSegment.html#a35228a00501c2a046076c58e4642c255">middle</a>();</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        flag = (biggest_segment-&gt;<a class="code" href="../../dc/d5b/classConductorSegment.html#a801965b0c65b1980159543b2147038da">isHorizontal</a>())? <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a59a5666d61c720bfe380711bbf4327e5">Qt::Horizontal</a> : <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a1b078af10b3c6f1432907bd97d71a7d9">Qt::Vertical</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">return</span> p1;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;}</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a"> 1290</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">Conductor::calculateTextItemPosition</a>()</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;{</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> || !<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>() || <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a6e199bba0474fcef619c8f13ff737604">type</a> != <a class="code" href="../../d4/d0b/classConductorProperties.html#af1439a082eeac27037086dc36b96a1ada28636edb39fb4cdc55cc9b6779f681dd">ConductorProperties::Multi</a>)</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>() -&gt; defaultConductorProperties.m_one_text_per_folio == <span class="keyword">true</span> &amp;&amp;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">relatedPotentialConductors</a>(<span class="keyword">false</span>).size() &gt; 0)</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *longuest_conductor = <a class="code" href="../../d9/d9d/conductor_8cpp.html#a7255f2a0d5739fa13352d03e061fc893">longuestConductorInPotential</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <span class="comment">//The longuest conductor isn&#39;t this conductor</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            <span class="comment">//we call calculateTextItemPosition of the longuest conductor</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">if</span>(longuest_conductor != <span class="keyword">this</span>)</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            longuest_conductor -&gt; <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            <span class="comment">//At this point this conductor is the longuest conductor we hide all text of conductor_list</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="keywordflow">foreach</span> (<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *c, <a class="code" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">relatedPotentialConductors</a>(<span class="keyword">false</span>)) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                    c -&gt; <a class="code" href="../../d3/d84/classConductor.html#ad3546c9cc056283d1b8b64ba0660f8ab">textItem</a>() -&gt; setVisible(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="comment">//Make sure text item is visible</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="comment">//position</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; wasMovedByUser())</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="comment">//Text field was moved by user :</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            <span class="comment">//we check if text field is yet  near the conductor</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        QPointF text_item_pos = <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; <a class="code" href="../../d3/d84/classConductor.html#a5f3938c409d36029c1ccd22f0b9bca8b">pos</a>();</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        QPainterPath near_shape = <a class="code" href="../../d3/d84/classConductor.html#a6f60f9f146fd142ee57b84084c843409">nearShape</a>();</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">if</span> (!near_shape.contains(text_item_pos)) {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; setPos(<a class="code" href="../../d3/d84/classConductor.html#aeba0bf998f55fd1a797b2db95822edd6">movePointIntoPolygon</a>(text_item_pos, near_shape));</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    }</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            <span class="comment">//Position and rotation of text is calculated.</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#ae10a7bcb8302c45b0fb16eed785b4ead">Qt::Orientations</a> rotation;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        QPointF text_pos = <a class="code" href="../../d3/d84/classConductor.html#ab32bd11b8874c7b45d1127c640477218">posForText</a>(rotation);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; wasRotateByUser())</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            rotation == <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a1b078af10b3c6f1432907bd97d71a7d9">Qt::Vertical</a> ? <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; setRotation(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a33baf8ef02236120a3fa80da49e2eee3">verti_rotate_text</a>):</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                                       <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; setRotation(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afb6cb4af311fb73e12b2526a9db73559">horiz_rotate_text</a>);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="comment">//Adjust the position of text if his rotation</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="comment">//is 0 or 270, to be exactly centered to the conductor</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; rotation() == 0)</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            text_pos.rx() -= <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; <a class="code" href="../../d3/d84/classConductor.html#a649d3839caef33cd2d47759f82e68a08">boundingRect</a>().width()/2;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a8f6309db4f1833e2e6739522ecf52845">m_horizontal_alignment</a> == Qt::AlignTop)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                text_pos.ry() -= <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;boundingRect().height();</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; rotation() == 270)</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            text_pos.ry() += <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; <a class="code" href="../../d3/d84/classConductor.html#a649d3839caef33cd2d47759f82e68a08">boundingRect</a>().width()/2;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#aa876ec3f716d3079f4af28f4bd32d771">m_vertical_alignment</a> == Qt::AlignLeft)</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                text_pos.rx() -= <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;boundingRect().height();</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; setPos(text_pos);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <span class="comment">//Ensure text item don&#39;t collide with this conductor</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;collidesWithItem(<span class="keyword">this</span>))</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            <span class="keywordflow">if</span>(rotation == <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a1b078af10b3c6f1432907bd97d71a7d9">Qt::Vertical</a>)</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#aa876ec3f716d3079f4af28f4bd32d771">m_vertical_alignment</a> == Qt::AlignRight)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;setX(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;x()+1);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#aa876ec3f716d3079f4af28f4bd32d771">m_vertical_alignment</a> == Qt::AlignLeft)</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;setX(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;x()-1);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                    <span class="keywordflow">return</span>; <span class="comment">//avoid infinite loop</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rotation == <a class="code" href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a59a5666d61c720bfe380711bbf4327e5">Qt::Horizontal</a>)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a8f6309db4f1833e2e6739522ecf52845">m_horizontal_alignment</a> == Qt::AlignTop)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;setY(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;y()-1);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a8f6309db4f1833e2e6739522ecf52845">m_horizontal_alignment</a> == Qt::AlignBottom)</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;setY(<a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;y()+1);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                    <span class="keywordflow">return</span>; <span class="comment">//avoid infinite loop</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    }</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;}</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ac6a16f9e398282ceb21a1f9af2811cc3"> 1386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ac6a16f9e398282ceb21a1f9af2811cc3">Conductor::saveProfile</a>(<span class="keywordtype">bool</span> undo) {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    Qt::Corner current_path_type = <a class="code" href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d">currentPathType</a>();</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a> old_profile(<a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[current_path_type]);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[current_path_type].fromConductor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="../../da/d91/classDiagram.html">Diagram</a> *dia = <a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>();</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">if</span> (undo &amp;&amp; dia) {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <a class="code" href="../../df/db7/classChangeConductorCommand.html">ChangeConductorCommand</a> *undo_object = <span class="keyword">new</span> <a class="code" href="../../df/db7/classChangeConductorCommand.html">ChangeConductorCommand</a>(</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            <span class="keyword">this</span>,</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;            old_profile,</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[current_path_type],</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            current_path_type</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        );</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        undo_object -&gt; setConductorTextItemMove(<a class="code" href="../../d3/d84/classConductor.html#ac45a028d155b9996b29d048c6c4a2550">before_mov_text_pos_</a>, <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a> -&gt; <a class="code" href="../../d3/d84/classConductor.html#a5f3938c409d36029c1ccd22f0b9bca8b">pos</a>());</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        dia -&gt; undoStack().push(undo_object);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a94d54afba64998cbeccd6f24add6f823"> 1408</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d3/d84/classConductor.html#a94d54afba64998cbeccd6f24add6f823">Conductor::getCoeff</a>(<span class="keyword">const</span> qreal &amp;value1, <span class="keyword">const</span> qreal &amp;value2) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">getSign</a>(value1) * <a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">getSign</a>(value2));</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;}</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5"> 1416</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">Conductor::getSign</a>(<span class="keyword">const</span> qreal &amp;value) {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">return</span>(value &lt; 0 ? -1 : 1);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;}</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aa7dd52ce69db4424acb6511676c88821"> 1425</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#aa7dd52ce69db4424acb6511676c88821">Conductor::setProfile</a>(<span class="keyword">const</span> <a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a> &amp;cp, Qt::Corner path_type) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[path_type] = cp;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">// si le type de trajet correspond a l&#39;actuel</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d">currentPathType</a>() == path_type) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[path_type].isNull()) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">generateConductorPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a63e3ae4489861b547d68d4e10a4a6410">updateConductorPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a>() == <a class="code" href="../../d4/d0b/classConductorProperties.html#af1439a082eeac27037086dc36b96a1ada28636edb39fb4cdc55cc9b6779f681dd">ConductorProperties::Multi</a>) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a397a49e90f3c96eaf2f185548e23c866"> 1443</a></span>&#160;<a class="code" href="../../de/d50/classConductorProfile.html">ConductorProfile</a> <a class="code" href="../../d3/d84/classConductor.html#a397a49e90f3c96eaf2f185548e23c866">Conductor::profile</a>(Qt::Corner path_type)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[path_type]);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ae5fb53e95ae09d8f11804b713caebb8f"> 1452</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ae5fb53e95ae09d8f11804b713caebb8f">Conductor::refreshText</a>()</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;{</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">m_freeze_label</a>)</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#ac7846e57c76dabcdf2bc186242a54a1a">setPlainText</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a>);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    }</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>.isEmpty())</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>())</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                QString text = <a class="code" href="../../d0/d66/classautonum_1_1AssignVariables.html#abf8fecd78bdaa59e34a2f7da7af6ebcf">autonum::AssignVariables::formulaToLabel</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>, <a class="code" href="../../d3/d84/classConductor.html#a07c8275e0b9f492d00bbaa489a5bbb7e">m_autoNum_seq</a>, <a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>());</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a> = text;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#ac7846e57c76dabcdf2bc186242a54a1a">setPlainText</a>(text);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#ac7846e57c76dabcdf2bc186242a54a1a">setPlainText</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a>);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        {</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#ac7846e57c76dabcdf2bc186242a54a1a">setPlainText</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a>);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    }</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;}</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a8099231eca7f72573c51ea77b8c39af9"> 1481</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a8099231eca7f72573c51ea77b8c39af9">Conductor::setPath</a>(<span class="keyword">const</span> QPainterPath &amp;<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>)</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;{</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a> == <a class="code" href="../../d3/d84/classConductor.html#adda5c37238ee59e58ae2e9b00a802006">m_path</a>)</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    prepareGeometryChange();</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#adda5c37238ee59e58ae2e9b00a802006">m_path</a> = <a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">path</a>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    update();</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;}</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4"> 1491</a></span>&#160;QPainterPath <a class="code" href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">Conductor::path</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/d84/classConductor.html#adda5c37238ee59e58ae2e9b00a802006">m_path</a>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01507"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aa1955dfad47e46a874d83fa606269e8a"> 1507</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#aa1955dfad47e46a874d83fa606269e8a">Conductor::setPropertyToPotential</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a> &amp;property,</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                       <span class="keywordtype">bool</span> only_text)</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;{</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">setProperties</a>(property);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    QSet &lt;Conductor *&gt; potential_list = <a class="code" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">relatedPotentialConductors</a>();</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="keywordflow">foreach</span>(<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *other_conductor, potential_list)</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">if</span> (only_text)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            <a class="code" href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a> other_properties = other_conductor-&gt;<a class="code" href="../../d3/d84/classConductor.html#a4b456d8635657c65a29c3d42903b4924">properties</a>();</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            other_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;            other_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            other_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#addfbee133c7ebb9667230520d80e6ce0">m_function</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#addfbee133c7ebb9667230520d80e6ce0">m_function</a>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            other_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#a6522d09e41df43edbea7d26dcf8e3172">m_tension_protocol</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a6522d09e41df43edbea7d26dcf8e3172">m_tension_protocol</a>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            other_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#a833f6a86de23a2bc7598be5ddf67c14a">m_wire_color</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a833f6a86de23a2bc7598be5ddf67c14a">m_wire_color</a>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;            other_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#a077f9f26788dc64bd31b25b1bd4465e8">m_wire_section</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a077f9f26788dc64bd31b25b1bd4465e8">m_wire_section</a>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            other_conductor-&gt;<a class="code" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">setProperties</a>(other_properties);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            other_conductor-&gt;<a class="code" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">setProperties</a>(property);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;}</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01538"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1"> 1538</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">Conductor::setProperties</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a> &amp;property)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;{</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a> == property) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    QString formula = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a> = property;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>.isEmpty())</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>())</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        {</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            QString text = <a class="code" href="../../d0/d66/classautonum_1_1AssignVariables.html#abf8fecd78bdaa59e34a2f7da7af6ebcf">autonum::AssignVariables::formulaToLabel</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>, <a class="code" href="../../d3/d84/classConductor.html#a07c8275e0b9f492d00bbaa489a5bbb7e">m_autoNum_seq</a>, <a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>());</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a> = text;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        }</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a>.isEmpty())</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a> = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ab411f57a5b904c59f513c3afaefb054b">setUpConnectionForFormula</a>(formula, <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160; </div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#ac7846e57c76dabcdf2bc186242a54a1a">setPlainText</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a>);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    QFont font = <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#a6f9c42c1b034d4ebfb432ec0f1add131">font</a>();</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    font.setPointSize(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#af080783f422f4cb8781a3b54fbb861cc">text_size</a>);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#a92a30718227b025f9ab301486d462ba7">setFont</a>(font);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;<a class="code" href="../../dc/d0e/classDiagramTextItem.html#a3af1e2bcc07b3f50aba04eba4e6efe78">setColor</a>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a52164e39c748f6faea91054fba300849">text_color</a>);</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a6e199bba0474fcef619c8f13ff737604">type</a> != <a class="code" href="../../d4/d0b/classConductorProperties.html#af1439a082eeac27037086dc36b96a1ada28636edb39fb4cdc55cc9b6779f681dd">ConductorProperties::Multi</a>)</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;setVisible(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;setVisible(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#a63eb9a69a0c66efa2a19ee51383b76a0">m_show_text</a>);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    update();</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    emit <a class="code" href="../../d3/d84/classConductor.html#ae2630c973b231d90da11294af4d43357">propertiesChange</a>();</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;}</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01581"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ab7e2d2c450d5e8ba53b8ac1869a33b42"> 1581</a></span>&#160;<a class="code" href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a> <a class="code" href="../../d3/d84/classConductor.html#a4b456d8635657c65a29c3d42903b4924">Conductor::properties</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ad0705d9d13a1a46875b375d0c5f7a900"> 1589</a></span>&#160;<a class="code" href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5">Conductor::Highlight</a> <a class="code" href="../../d3/d84/classConductor.html#ad0705d9d13a1a46875b375d0c5f7a900">Conductor::highlight</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="../../d3/d84/classConductor.html#a8e1b9e04db1bc058bb5c7d9755eff693">must_highlight_</a>);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;}</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160; </div>
<div class="line"><a name="l01596"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a949cba54ee1b77bf6c373c1757885b4a"> 1596</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a949cba54ee1b77bf6c373c1757885b4a">Conductor::setHighlighted</a>(<a class="code" href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5">Conductor::Highlight</a> hl) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a8e1b9e04db1bc058bb5c7d9755eff693">must_highlight_</a> = hl;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    update();</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a6ce9bc6c9c6f6fad3c96322a1776eeb3"> 1606</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a6ce9bc6c9c6f6fad3c96322a1776eeb3">Conductor::displayedTextChanged</a>()</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;{</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    QVariant old_value, new_value;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    old_value.setValue(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <a class="code" href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a> new_properties(<a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    new_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a> = <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;toPlainText();</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    new_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a> = <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;toPlainText();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    new_value.setValue(new_properties);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160; </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    QUndoCommand *undo = <span class="keyword">new</span> QUndoCommand(<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#af834c6e3bdd9708fecb33edf23c5aca6">tr</a>(<span class="stringliteral">&quot;Modifier les proprits d&#39;un conducteur&quot;</span>, <span class="stringliteral">&quot;undo caption&quot;</span>));</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keyword">new</span> <a class="code" href="../../df/d51/classQPropertyUndoCommand.html">QPropertyUndoCommand</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;properties&quot;</span>, old_value, new_value, undo);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; </div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">relatedPotentialConductors</a>().isEmpty())</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        undo-&gt;setText(<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#af834c6e3bdd9708fecb33edf23c5aca6">tr</a>(<span class="stringliteral">&quot;Modifier les proprits de plusieurs conducteurs&quot;</span>, <span class="stringliteral">&quot;undo caption&quot;</span>));</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="keywordflow">foreach</span> (<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *potential_conductor, <a class="code" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">relatedPotentialConductors</a>())</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            old_value.setValue(potential_conductor-&gt;<a class="code" href="../../d3/d84/classConductor.html#a4b456d8635657c65a29c3d42903b4924">properties</a>());</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            <a class="code" href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a> new_properties = potential_conductor-&gt;<a class="code" href="../../d3/d84/classConductor.html#a4b456d8635657c65a29c3d42903b4924">properties</a>();</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;            new_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a> = <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;toPlainText();</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            new_properties.<a class="code" href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">text</a> = <a class="code" href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">m_text_item</a>-&gt;toPlainText();</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;            new_value.setValue(new_properties);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;            <span class="keyword">new</span> <a class="code" href="../../df/d51/classQPropertyUndoCommand.html">QPropertyUndoCommand</a> (potential_conductor, <span class="stringliteral">&quot;properties&quot;</span>, old_value, new_value, undo);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160; </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>()-&gt;<a class="code" href="../../da/d91/classDiagram.html#aadc97c48501180ecd35ce25a8ebf161d">undoStack</a>().push(undo);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;}</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f"> 1647</a></span>&#160;QSet&lt;Conductor *&gt; <a class="code" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">Conductor::relatedPotentialConductors</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> all_diagram, QList &lt;Terminal *&gt; *t_list)</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;{</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="keywordtype">bool</span> declar_t_list = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keywordflow">if</span> (t_list == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        declar_t_list = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        t_list = <span class="keyword">new</span> QList &lt;Terminal *&gt;;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    QSet &lt;Conductor *&gt; other_conductors;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    QList &lt;Terminal *&gt; this_terminal;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    this_terminal &lt;&lt; <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> &lt;&lt; <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        <span class="comment">// Return all conductors of terminal 1 and 2</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/ded/classTerminal.html">Terminal</a> *terminal : this_terminal)</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="keywordflow">if</span> (!t_list-&gt;contains(terminal))</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            t_list-&gt;append(terminal);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            QList &lt;Conductor *&gt; other_conductors_list_t = terminal-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a31d1c604e0f9991140ad938c741df3af">conductors</a>();</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                <span class="comment">//Get the other terminals of the parent element of @terminal, who share the same potential</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                <span class="comment">//This is use for element type &quot;folio report&quot; and &quot;terminal element&quot;</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d9/ded/classTerminal.html">Terminal</a> *t : <a class="code" href="../../d8/dc7/terminal_8cpp.html#a0d860470dc66715c56fd2cad5e2dd9bb">relatedPotentialTerminal</a>(terminal, all_diagram))</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                <span class="keywordflow">if</span> (!t_list-&gt;contains(t))</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                    t_list -&gt; append(t);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                    other_conductors_list_t += t-&gt;conductors();</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            }</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            other_conductors_list_t.removeAll(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                <span class="comment">//Get the conductors at the same potential for each conductors of other_conductors_list_t</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *c : other_conductors_list_t) {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                other_conductors += c-&gt;relatedPotentialConductors(all_diagram, t_list);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;            }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="preprocessor">#if QT_VERSION &lt; QT_VERSION_CHECK(5, 14, 0) // ### Qt 6: remove</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            other_conductors += other_conductors_list_t.toSet();</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="preprocessor">#pragma message(&quot;@TODO remove code for QT 5.14 or later&quot;)</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;            other_conductors += QSet&lt;Conductor*&gt;(other_conductors_list_t.begin(),other_conductors_list_t.end());</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        }</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    }</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160; </div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    other_conductors.remove(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160; </div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="keywordflow">if</span> (declar_t_list) <span class="keyword">delete</span> t_list;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">return</span>(other_conductors);</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;}</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a180d5c54f65a9bdb3e167892fccb0584"> 1703</a></span>&#160;<a class="code" href="../../dd/d28/classQETDiagramEditor.html">QETDiagramEditor</a>* <a class="code" href="../../d3/d84/classConductor.html#a180d5c54f65a9bdb3e167892fccb0584">Conductor::diagramEditor</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>())                     <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>() -&gt; views().isEmpty()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    QWidget *w = <span class="keyword">const_cast&lt;</span>QGraphicsView *<span class="keyword">&gt;</span>(<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>() -&gt; views().at(0));</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">while</span> (w -&gt; parentWidget() &amp;&amp; !w -&gt; isWindow()) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        w = w -&gt; parentWidget();</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">return</span>(qobject_cast&lt;QETDiagramEditor *&gt;(w));</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;}</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ac6b418b398cbb61a5c73b5136b99c050"> 1717</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ac6b418b398cbb61a5c73b5136b99c050">Conductor::editProperty</a>() {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <a class="code" href="../../d1/d61/classConductorPropertiesDialog.html#a2345b73499b5756d9b3941dda9ad6f37">ConductorPropertiesDialog::PropertiesDialog</a>(<span class="keyword">this</span>, <a class="code" href="../../d3/d84/classConductor.html#a180d5c54f65a9bdb3e167892fccb0584">diagramEditor</a>());</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;}</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a0875fa9aca5e003ba6746e0e1f2d5c99"> 1721</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a0875fa9aca5e003ba6746e0e1f2d5c99">Conductor::setSequenceNum</a>(<span class="keyword">const</span> <a class="code" href="../../d3/dcc/classautonum_1_1sequentialNumbers.html">autonum::sequentialNumbers</a>&amp; sn)</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;{</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a07c8275e0b9f492d00bbaa489a5bbb7e">m_autoNum_seq</a> = sn;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ae5fb53e95ae09d8f11804b713caebb8f">refreshText</a>();</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ab411f57a5b904c59f513c3afaefb054b"> 1733</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#ab411f57a5b904c59f513c3afaefb054b">Conductor::setUpConnectionForFormula</a>(QString old_formula, QString new_formula)</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;{</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>())</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    {</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <span class="comment">//Because the variable %F is a reference to another text which can contain variables,</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="comment">//we must to replace %F by the real text, to check if the real text contain the variable %id</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        <span class="keywordflow">if</span> (old_formula.contains(<span class="stringliteral">&quot;%F&quot;</span>))</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            old_formula.replace(<span class="stringliteral">&quot;%F&quot;</span>, <a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>()-&gt;border_and_titleblock.folio());</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        </div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        <span class="keywordflow">if</span> (old_formula.contains(<span class="stringliteral">&quot;%id&quot;</span>))</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            disconnect(<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>()-&gt;project(), &amp;<a class="code" href="../../d1/d80/classQETProject.html#ae21580f2faa0d4677b948b6f489315ad">QETProject::projectDiagramsOrderChanged</a>, <span class="keyword">this</span>, &amp;<a class="code" href="../../d3/d84/classConductor.html#ae5fb53e95ae09d8f11804b713caebb8f">Conductor::refreshText</a>);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            <span class="comment">//Label is frozen, so we don&#39;t update it.</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">m_freeze_label</a> == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <span class="keywordflow">if</span> (new_formula.contains(<span class="stringliteral">&quot;%F&quot;</span>))</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            new_formula.replace(<span class="stringliteral">&quot;%F&quot;</span>, <a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>()-&gt;border_and_titleblock.folio());</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="keywordflow">if</span> (new_formula.contains(<span class="stringliteral">&quot;%id&quot;</span>))</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            connect(<a class="code" href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">diagram</a>()-&gt;project(), &amp;<a class="code" href="../../d1/d80/classQETProject.html#ae21580f2faa0d4677b948b6f489315ad">QETProject::projectDiagramsOrderChanged</a>, <span class="keyword">this</span>, &amp;<a class="code" href="../../d3/d84/classConductor.html#ae5fb53e95ae09d8f11804b713caebb8f">Conductor::refreshText</a>);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;}</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"><a class="line" href="../../d9/d9d/conductor_8cpp.html#a35a4e21b8fe125223eedbef06887fc54"> 1763</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d9/d9d/conductor_8cpp.html#a35a4e21b8fe125223eedbef06887fc54">isContained</a>(<span class="keyword">const</span> QPointF &amp;a, <span class="keyword">const</span> QPointF &amp;b, <span class="keyword">const</span> QPointF &amp;c) {</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">return</span>(</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <a class="code" href="../../d7/d0f/conductor_8h.html#a6475acccfc5a61a6e11c96b66815d513">isBetween</a>(a.x(), b.x(), c.x()) &amp;&amp;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <a class="code" href="../../d7/d0f/conductor_8h.html#a6475acccfc5a61a6e11c96b66815d513">isBetween</a>(a.y(), b.y(), c.y())</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    );</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;}</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ade9164e49ea74c88d522ec8227f67944"> 1773</a></span>&#160;QList&lt;QPointF&gt; <a class="code" href="../../d3/d84/classConductor.html#ade9164e49ea74c88d522ec8227f67944">Conductor::junctions</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    QList&lt;QPointF&gt; junctions_list;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="comment">// pour qu&#39;il y ait des jonctions, il doit y avoir d&#39;autres conducteurs et des bifurcations</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    QList&lt;Conductor *&gt; other_conductors = <a class="code" href="../../d9/d9d/conductor_8cpp.html#ae491cfb1a5b53c60ad377bf63d52ee74">relatedConductors</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    QList&lt;ConductorBend&gt; bends_list = <a class="code" href="../../d3/d84/classConductor.html#ae6763a62a0808e679cb4d2a685af59f6">bends</a>();</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keywordflow">if</span> (other_conductors.isEmpty() || bends_list.isEmpty()) {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordflow">return</span>(junctions_list);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    QList&lt;QPointF&gt; points = <a class="code" href="../../d3/d84/classConductor.html#a99f9ea9c0fd0fc783fd0c6c7ac276205">segmentsToPoints</a>();</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1 ; i &lt; (points.size() -1) ; ++ i) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        QPointF point = points.at(i);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <span class="comment">// determine si le point est une bifurcation ou non</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordtype">bool</span> is_bend = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        Qt::Corner current_bend_type = Qt::TopLeftCorner;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">foreach</span>(<a class="code" href="../../d7/d0f/conductor_8h.html#a1fd4841856a6b7d4e47e5290a0e71619">ConductorBend</a> cb, bends_list)</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            <span class="keywordflow">if</span> (cb.first == point)</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                is_bend = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                current_bend_type = cb.second;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        <span class="comment">// si le point n&#39;est pas une bifurcation, il ne peut etre une jonction (enfin pas au niveau de ce conducteur)</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="keywordflow">if</span> (!is_bend) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="keywordtype">bool</span> is_junction = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        QPointF scene_point = mapToScene(point);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <span class="keywordflow">foreach</span>(<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *c, other_conductors)</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                <span class="comment">// exprime le point dans les coordonnees de l&#39;autre conducteur</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            QPointF conductor_point = c -&gt; mapFromScene(scene_point);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                <span class="comment">// recupere les segments de l&#39;autre conducteur</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            QList&lt;ConductorSegment *&gt; c_segments = c -&gt; <a class="code" href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96">segmentsList</a>();</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            <span class="keywordflow">if</span> (c_segments.isEmpty())</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                <span class="comment">// parcoure les segments a la recherche d&#39;un point commun</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0 ; j &lt; c_segments.count() ; ++ j)</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment = c_segments[j];</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                    <span class="comment">// un point commun a ete trouve sur ce segment</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d9/d9d/conductor_8cpp.html#a35a4e21b8fe125223eedbef06887fc54">isContained</a>(conductor_point, segment -&gt; firstPoint(), segment -&gt; secondPoint()))</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                {</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                    is_junction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                    <span class="comment">// ce point commun ne doit pas etre une bifurcation identique a celle-ci</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                    QList&lt;ConductorBend&gt; other_conductor_bends = c -&gt; <a class="code" href="../../d3/d84/classConductor.html#ae6763a62a0808e679cb4d2a685af59f6">bends</a>();</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                    <span class="keywordflow">foreach</span>(<a class="code" href="../../d7/d0f/conductor_8h.html#a1fd4841856a6b7d4e47e5290a0e71619">ConductorBend</a> cb, other_conductor_bends)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                    {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                        <span class="keywordflow">if</span> (cb.first == conductor_point &amp;&amp; cb.second == current_bend_type)</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                        {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                            is_junction = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                        }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                    }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                <span class="keywordflow">if</span> (is_junction) junctions_list &lt;&lt; point;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        }</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="keywordflow">return</span>(junctions_list);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;}</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160; </div>
<div class="line"><a name="l01843"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#ae6763a62a0808e679cb4d2a685af59f6"> 1843</a></span>&#160;QList&lt;ConductorBend&gt; <a class="code" href="../../d3/d84/classConductor.html#ae6763a62a0808e679cb4d2a685af59f6">Conductor::bends</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    QList&lt;ConductorBend&gt; points;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>) <span class="keywordflow">return</span>(points);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    </div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="comment">// recupere la liste des segments de taille non nulle</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    QList&lt;ConductorSegment *&gt; visible_segments;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *segment = <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="keywordflow">while</span> (segment -&gt; hasNextSegment()) {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">if</span> (!segment -&gt; isPoint()) visible_segments &lt;&lt; segment;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        segment = segment -&gt; nextSegment();</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span> (!segment  -&gt; isPoint()) visible_segments &lt;&lt; segment;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <a class="code" href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a> *next_segment;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; visible_segments.count() -1 ; ++ i) {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        segment = visible_segments[i];</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        next_segment = visible_segments[i + 1];</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">if</span> (!segment -&gt; isPoint() &amp;&amp; !next_segment -&gt; isPoint()) {</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <span class="comment">// si les deux segments ne sont pas dans le meme sens, on a une bifurcation</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            <span class="keywordflow">if</span> (next_segment -&gt; <a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a>() != segment -&gt; <a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a>()) {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                Qt::Corner bend_type;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                qreal <a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a> = segment -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>();</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                qreal nsl = next_segment -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>();</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                <span class="keywordflow">if</span> (segment -&gt; isHorizontal()) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a> &lt; 0 &amp;&amp; nsl &lt; 0) {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                        bend_type = Qt::BottomLeftCorner;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sl &lt; 0 &amp;&amp; nsl &gt; 0) {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                        bend_type = Qt::TopLeftCorner;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a> &gt; 0 &amp;&amp; nsl &lt; 0) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                        bend_type = Qt::BottomRightCorner;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                        bend_type = Qt::TopRightCorner;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                    }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a> &lt; 0 &amp;&amp; nsl &lt; 0) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                        bend_type = Qt::TopRightCorner;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sl &lt; 0 &amp;&amp; nsl &gt; 0) {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                        bend_type = Qt::TopLeftCorner;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">sl</a> &gt; 0 &amp;&amp; nsl &lt; 0) {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                        bend_type = Qt::BottomRightCorner;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                        bend_type = Qt::BottomLeftCorner;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                    }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                }</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                points &lt;&lt; qMakePair(segment -&gt; secondPoint(), bend_type);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        }</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keywordflow">return</span>(points);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01900"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aa9680d1f729374c7ffe916837a488d55"> 1900</a></span>&#160;Qt::Corner <a class="code" href="../../d3/d84/classConductor.html#aa9680d1f729374c7ffe916837a488d55">Conductor::movementType</a>(<span class="keyword">const</span> QPointF &amp;start, <span class="keyword">const</span> QPointF &amp;end) {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    Qt::Corner result = Qt::BottomRightCorner;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">if</span> (start.x() &lt;= end.x()) {</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        result = start.y() &lt;= end.y() ? Qt::BottomRightCorner : Qt::TopRightCorner;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        result = start.y() &lt;= end.y() ? Qt::BottomLeftCorner : Qt::TopLeftCorner;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keywordflow">return</span>(result);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;}</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01911"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d"> 1911</a></span>&#160;Qt::Corner <a class="code" href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d">Conductor::currentPathType</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="../../d3/d84/classConductor.html#aa9680d1f729374c7ffe916837a488d55">movementType</a>(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor()));</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;}</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160; </div>
<div class="line"><a name="l01916"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a4beaa3a1d188750fc12ccfdf1108173a"> 1916</a></span>&#160;<a class="code" href="../../d7/d0f/conductor_8h.html#ae0511082eaa876e0d6b6d88367998be8">ConductorProfilesGroup</a> <a class="code" href="../../d3/d84/classConductor.html#a4beaa3a1d188750fc12ccfdf1108173a">Conductor::profiles</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;}</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a7ece2eac7ad3deec235c64cc98a9c43a"> 1924</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a7ece2eac7ad3deec235c64cc98a9c43a">Conductor::setProfiles</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d0f/conductor_8h.html#ae0511082eaa876e0d6b6d88367998be8">ConductorProfilesGroup</a> &amp;cpg) {</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a> = cpg;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">conductor_profiles</a>[<a class="code" href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d">currentPathType</a>()].isNull()) {</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">generateConductorPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a63e3ae4489861b547d68d4e10a4a6410">updateConductorPath</a>(<a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; orientation(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; dockConductor(), <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a> -&gt; orientation());</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">modified_path</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#a4b456d8635657c65a29c3d42903b4924">properties</a>().<a class="code" href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">type</a> == <a class="code" href="../../d4/d0b/classConductorProperties.html#af1439a082eeac27037086dc36b96a1ada28636edb39fb4cdc55cc9b6779f681dd">ConductorProperties::Multi</a>) {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">calculateTextItemPosition</a>();</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    }</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;}</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160; </div>
<div class="line"><a name="l01939"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a4406a6201746cf192c00662d464c7c0c"> 1939</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a4406a6201746cf192c00662d464c7c0c">Conductor::deleteSegments</a>() {</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> -&gt; hasNextSegment()) <span class="keyword">delete</span> <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> -&gt; nextSegment();</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="keyword">delete</span> <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a>;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">segments</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    }</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;}</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#aeba0bf998f55fd1a797b2db95822edd6"> 1953</a></span>&#160;QPointF <a class="code" href="../../d3/d84/classConductor.html#aeba0bf998f55fd1a797b2db95822edd6">Conductor::movePointIntoPolygon</a>(<span class="keyword">const</span> QPointF &amp;point, <span class="keyword">const</span> QPainterPath &amp;polygon) {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="comment">// decompose le polygone en lignes et points</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    QList&lt;QPolygonF&gt; polygons = polygon.simplified().toSubpathPolygons();</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    QList&lt;QLineF&gt; lines;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    QList&lt;QPointF&gt; points;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordflow">foreach</span>(QPolygonF polygon, polygons) {</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        <span class="keywordflow">if</span> (polygon.count() &lt;= 1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        </div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="comment">// on recense les lignes et les points</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1 ; i &lt; polygon.count() ; ++ i) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            lines &lt;&lt; QLineF(polygon.at(i - 1), polygon.at(i));</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            points &lt;&lt; polygon.at(i -1);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    </div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="comment">// on fait des projetes orthogonaux du point sur les differents segments du</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="comment">// polygone, en les triant par longueur croissante</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    QMap&lt;qreal, QPointF&gt; intersections;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    <span class="keywordflow">foreach</span> (QLineF line, lines) {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        QPointF intersection_point;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d9a/namespaceQET.html#a8c06162adcffa1bc992082e3fc4705a7">QET::orthogonalProjection</a>(point, line, &amp;intersection_point)) {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            intersections.insert(QLineF(intersection_point, point).<a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>(), intersection_point);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        }</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="keywordflow">if</span> (intersections.count()) {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="comment">// on determine la plus courte longueur pour un projete orthogonal</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        QPointF the_point = intersections[intersections.keys().first()];</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="keywordflow">return</span>(the_point);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            <span class="comment">// determine le coin du polygone le plus proche du point exterieur</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            qreal minimum_length = -1;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            <span class="keywordtype">int</span> point_index = -1;</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; points.count() ; ++ i) {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                qreal <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a> = qAbs(QLineF(points.at(i), point).length());</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                <span class="keywordflow">if</span> (minimum_length &lt; 0 || <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a> &lt; minimum_length) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                    minimum_length = <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                    point_index    = i;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                }</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            <span class="comment">// on connait desormais le coin le plus proche du texte</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="comment">// aucun projete orthogonal n&#39;a donne quoi que ce soit, on met le texte sur un des coins du polygone</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="keywordflow">return</span>(points.at(point_index));</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    }</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;}</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l02005"></a><span class="lineno"><a class="line" href="../../d7/d0f/conductor_8h.html#abea404d2d796bb349b4ac176309d1843"> 2005</a></span>&#160;<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> * <a class="code" href="../../d9/d9d/conductor_8cpp.html#a7255f2a0d5739fa13352d03e061fc893">longuestConductorInPotential</a>(<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *conductor, <span class="keywordtype">bool</span> all_diagram) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *longuest_conductor = conductor;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="comment">//Search the longuest conductor</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="keywordflow">foreach</span> (<a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *c, conductor -&gt; <a class="code" href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">relatedPotentialConductors</a>(all_diagram))</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        <span class="keywordflow">if</span> (c -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>() &gt; longuest_conductor -&gt; <a class="code" href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">length</a>())</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            longuest_conductor = c;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="keywordflow">return</span> longuest_conductor;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;}</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"><a class="line" href="../../d7/d0f/conductor_8h.html#ae491cfb1a5b53c60ad377bf63d52ee74"> 2022</a></span>&#160;QList &lt;Conductor *&gt; <a class="code" href="../../d9/d9d/conductor_8cpp.html#ae491cfb1a5b53c60ad377bf63d52ee74">relatedConductors</a>(<span class="keyword">const</span> <a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *conductor) {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    QList&lt;Conductor *&gt; other_conductors_list = conductor -&gt; <a class="code" href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">terminal1</a> -&gt; conductors();</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    other_conductors_list &lt;&lt; conductor -&gt; <a class="code" href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">terminal2</a>-&gt;<a class="code" href="../../d9/ded/classTerminal.html#a31d1c604e0f9991140ad938c741df3af">conductors</a>();</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    other_conductors_list.removeAll(<span class="keyword">const_cast&lt;</span><a class="code" href="../../d3/d84/classConductor.html">Conductor</a> *<span class="keyword">&gt;</span> (conductor));</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">return</span>(other_conductors_list);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;}</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"><a class="line" href="../../d3/d84/classConductor.html#a81c71013ecb3ca1521711eea306ad499"> 2035</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d84/classConductor.html#a81c71013ecb3ca1521711eea306ad499">Conductor::setFreezeLabel</a>(<span class="keywordtype">bool</span> freeze)</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;{</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <a class="code" href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">m_freeze_label</a> = freeze;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160; </div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">m_freeze_label</a> != freeze)</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    {</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">m_freeze_label</a> = freeze;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        QString f = <a class="code" href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">m_properties</a>.<a class="code" href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">m_formula</a>;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        <a class="code" href="../../d3/d84/classConductor.html#ab411f57a5b904c59f513c3afaefb054b">setUpConnectionForFormula</a>(f,f);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassConductor_html_a5c91017d1109796547280d4d269ee8ab"><div class="ttname"><a href="../../d3/d84/classConductor.html#a5c91017d1109796547280d4d269ee8ab">Conductor::m_properties</a></div><div class="ttdeci">ConductorProperties m_properties</div><div class="ttdoc">Functional properties.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00168">conductor.h:168</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_ab5dc793e92c9652ee566d934c5242db9"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#ab5dc793e92c9652ee566d934c5242db9">autonum::sequentialNumbers::unit_folio</a></div><div class="ttdeci">QStringList unit_folio</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6f/assignvariables_8h_source.html#l00050">assignvariables.h:50</a></div></div>
<div class="ttc" id="aclassConductor_html_a180d5c54f65a9bdb3e167892fccb0584"><div class="ttname"><a href="../../d3/d84/classConductor.html#a180d5c54f65a9bdb3e167892fccb0584">Conductor::diagramEditor</a></div><div class="ttdeci">QETDiagramEditor * diagramEditor() const</div><div class="ttdoc">Conductor::diagramEditor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01703">conductor.cpp:1703</a></div></div>
<div class="ttc" id="aclassConductor_html_adda5c37238ee59e58ae2e9b00a802006"><div class="ttname"><a href="../../d3/d84/classConductor.html#adda5c37238ee59e58ae2e9b00a802006">Conductor::m_path</a></div><div class="ttdeci">QPainterPath m_path</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00195">conductor.h:195</a></div></div>
<div class="ttc" id="aclassConductorProfile_html_a3f6551cf26b3627f6646e3f3b4f285c5"><div class="ttname"><a href="../../de/d50/classConductorProfile.html#a3f6551cf26b3627f6646e3f3b4f285c5">ConductorProfile::verticalSegments</a></div><div class="ttdeci">QList&lt; ConductorSegmentProfile * &gt; verticalSegments()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/conductorprofile_8cpp_source.html#l00124">conductorprofile.cpp:124</a></div></div>
<div class="ttc" id="aclassQETDiagramEditor_html"><div class="ttname"><a href="../../dd/d28/classQETDiagramEditor.html">QETDiagramEditor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db5/qetdiagrameditor_8h_source.html#l00050">qetdiagrameditor.h:51</a></div></div>
<div class="ttc" id="aclassDiagramTextItem_html_a92a30718227b025f9ab301486d462ba7"><div class="ttname"><a href="../../dc/d0e/classDiagramTextItem.html#a92a30718227b025f9ab301486d462ba7">DiagramTextItem::setFont</a></div><div class="ttdeci">void setFont(const QFont &amp;font)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d93/diagramtextitem_8cpp_source.html#l00153">diagramtextitem.cpp:153</a></div></div>
<div class="ttc" id="aclassConductor_html_a949cba54ee1b77bf6c373c1757885b4a"><div class="ttname"><a href="../../d3/d84/classConductor.html#a949cba54ee1b77bf6c373c1757885b4a">Conductor::setHighlighted</a></div><div class="ttdeci">virtual void setHighlighted(Highlight)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01596">conductor.cpp:1596</a></div></div>
<div class="ttc" id="aclassConductorProperties_html"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html">ConductorProperties</a></div><div class="ttdoc">The ConductorProperties class This class represents the functional properties of a particular conduct...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00067">conductorproperties.h:68</a></div></div>
<div class="ttc" id="aclassConductor_html_afb3100d2ff5431340611d058be72f3dd"><div class="ttname"><a href="../../d3/d84/classConductor.html#afb3100d2ff5431340611d058be72f3dd">Conductor::addHandler</a></div><div class="ttdeci">void addHandler()</div><div class="ttdoc">Conductor::addHandler Add handlers for this item.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00845">conductor.cpp:845</a></div></div>
<div class="ttc" id="aclassConductor_html_ae5fb53e95ae09d8f11804b713caebb8f"><div class="ttname"><a href="../../d3/d84/classConductor.html#ae5fb53e95ae09d8f11804b713caebb8f">Conductor::refreshText</a></div><div class="ttdeci">void refreshText()</div><div class="ttdoc">Conductor::refreshText Refresh the text of this conductor. recalcule and set the text according to th...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01452">conductor.cpp:1452</a></div></div>
<div class="ttc" id="aclassConductor_html_a99f9ea9c0fd0fc783fd0c6c7ac276205"><div class="ttname"><a href="../../d3/d84/classConductor.html#a99f9ea9c0fd0fc783fd0c6c7ac276205">Conductor::segmentsToPoints</a></div><div class="ttdeci">QList&lt; QPointF &gt; segmentsToPoints() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00930">conductor.cpp:930</a></div></div>
<div class="ttc" id="aclassQetGraphicsHandlerItem_html_a77c6a8b97a188bf55d800417fa0a2ba2"><div class="ttname"><a href="../../de/df5/classQetGraphicsHandlerItem.html#a77c6a8b97a188bf55d800417fa0a2ba2">QetGraphicsHandlerItem::setColor</a></div><div class="ttdeci">void setColor(QColor color)</div><div class="ttdoc">QetGraphicsHandlerItem::setColor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d78/qetgraphicshandleritem_8cpp_source.html#l00048">qetgraphicshandleritem.cpp:48</a></div></div>
<div class="ttc" id="aclassConductor_html_a81c71013ecb3ca1521711eea306ad499"><div class="ttname"><a href="../../d3/d84/classConductor.html#a81c71013ecb3ca1521711eea306ad499">Conductor::setFreezeLabel</a></div><div class="ttdeci">void setFreezeLabel(bool freeze)</div><div class="ttdoc">Conductor::setFreezeLabel Freeze this conductor label if true Unfreeze this conductor label if false.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l02035">conductor.cpp:2035</a></div></div>
<div class="ttc" id="aclassConductor_html_a4406a6201746cf192c00662d464c7c0c"><div class="ttname"><a href="../../d3/d84/classConductor.html#a4406a6201746cf192c00662d464c7c0c">Conductor::deleteSegments</a></div><div class="ttdeci">void deleteSegments()</div><div class="ttdoc">Supprime les segments.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01939">conductor.cpp:1939</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a46fed7414c993b78117a5a916cb1d7f6"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a46fed7414c993b78117a5a916cb1d7f6">ConductorProperties::m_bicolor</a></div><div class="ttdeci">bool m_bicolor</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00105">conductorproperties.h:105</a></div></div>
<div class="ttc" id="adiagramcommands_8h_html"><div class="ttname"><a href="../../d5/d8a/diagramcommands_8h.html">diagramcommands.h</a></div></div>
<div class="ttc" id="aclassConductor_html_a8ea3acabe2c6619939325511f3e98f66"><div class="ttname"><a href="../../d3/d84/classConductor.html#a8ea3acabe2c6619939325511f3e98f66">Conductor::shareOffsetBetweenSegments</a></div><div class="ttdeci">QHash&lt; ConductorSegmentProfile *, qreal &gt; shareOffsetBetweenSegments(const qreal &amp;offset, const QList&lt; ConductorSegmentProfile * &gt; &amp;, const qreal &amp;=0.01) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00287">conductor.cpp:287</a></div></div>
<div class="ttc" id="aclassConductor_html_a6b018f0dc7cff588cf7ae39aa832c7ad"><div class="ttname"><a href="../../d3/d84/classConductor.html#a6b018f0dc7cff588cf7ae39aa832c7ad">Conductor::pen_and_brush_initialized</a></div><div class="ttdeci">static bool pen_and_brush_initialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00194">conductor.h:194</a></div></div>
<div class="ttc" id="aclassTerminal_html_aac01ad77bc72ce5406f9397bfcb656da"><div class="ttname"><a href="../../d9/ded/classTerminal.html#aac01ad77bc72ce5406f9397bfcb656da">Terminal::parentElement</a></div><div class="ttdeci">Element * parentElement() const</div><div class="ttdoc">Terminal::parentElement.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/terminal_8cpp_source.html#l00822">terminal.cpp:822</a></div></div>
<div class="ttc" id="aclassConductor_html_af36e7c8376f8603a9b6ec13d50438ab9"><div class="ttname"><a href="../../d3/d84/classConductor.html#af36e7c8376f8603a9b6ec13d50438ab9">Conductor::conductor_brush</a></div><div class="ttdeci">static QBrush conductor_brush</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00193">conductor.h:193</a></div></div>
<div class="ttc" id="aconductor_8h_html_a1fd4841856a6b7d4e47e5290a0e71619"><div class="ttname"><a href="../../d7/d0f/conductor_8h.html#a1fd4841856a6b7d4e47e5290a0e71619">ConductorBend</a></div><div class="ttdeci">QPair&lt; QPointF, Qt::Corner &gt; ConductorBend</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00036">conductor.h:34</a></div></div>
<div class="ttc" id="aclassConductorProfile_html_aa4c8e0092f244fb52a51ea077797088a"><div class="ttname"><a href="../../de/d50/classConductorProfile.html#aa4c8e0092f244fb52a51ea077797088a">ConductorProfile::isNull</a></div><div class="ttdeci">bool isNull() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/conductorprofile_8cpp_source.html#l00072">conductorprofile.cpp:72</a></div></div>
<div class="ttc" id="aclassConductor_html_a63e3ae4489861b547d68d4e10a4a6410"><div class="ttname"><a href="../../d3/d84/classConductor.html#a63e3ae4489861b547d68d4e10a4a6410">Conductor::updateConductorPath</a></div><div class="ttdeci">void updateConductorPath(const QPointF &amp;, Qet::Orientation, const QPointF &amp;, Qet::Orientation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00218">conductor.cpp:218</a></div></div>
<div class="ttc" id="aclassConductor_html_a9a17e0e7c33d5963b336be63133f7bd0"><div class="ttname"><a href="../../d3/d84/classConductor.html#a9a17e0e7c33d5963b336be63133f7bd0">Conductor::shape</a></div><div class="ttdeci">QPainterPath shape() const override</div><div class="ttdoc">Conductor::shape.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00889">conductor.cpp:889</a></div></div>
<div class="ttc" id="aclassConductor_html_a36f1eb1f19fc9e8847a88d77c43f69b2"><div class="ttname"><a href="../../d3/d84/classConductor.html#a36f1eb1f19fc9e8847a88d77c43f69b2">Conductor::hoverEnterEvent</a></div><div class="ttdeci">void hoverEnterEvent(QGraphicsSceneHoverEvent *event) override</div><div class="ttdoc">Conductor::hoverEnterEvent Manage the hover enter event.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00646">conductor.cpp:646</a></div></div>
<div class="ttc" id="aclassConductor_html_a61a873dd764ebfa2ff3117a255669a5c"><div class="ttname"><a href="../../d3/d84/classConductor.html#a61a873dd764ebfa2ff3117a255669a5c">Conductor::terminal1</a></div><div class="ttdeci">Terminal * terminal1</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00067">conductor.h:67</a></div></div>
<div class="ttc" id="aclassConductor_html_a3bc24a36dba5f211726f9524ffe48953"><div class="ttname"><a href="../../d3/d84/classConductor.html#a3bc24a36dba5f211726f9524ffe48953">Conductor::diagram</a></div><div class="ttdeci">Diagram * diagram() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00559">conductor.cpp:559</a></div></div>
<div class="ttc" id="aclassConductor_html_a971beedc17f0729c9026ac917da133a5a64ee154dab513cd322c58a15e4818ebe"><div class="ttname"><a href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5a64ee154dab513cd322c58a15e4818ebe">Conductor::Normal</a></div><div class="ttdeci">@ Normal</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00065">conductor.h:65</a></div></div>
<div class="ttc" id="aclassElement_html_a873eecea89b2cdb02b740beabd2e36c6"><div class="ttname"><a href="../../d5/d3c/classElement.html#a873eecea89b2cdb02b740beabd2e36c6">Element::uuid</a></div><div class="ttdeci">QUuid uuid() const</div><div class="ttdoc">Element::uuid.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/element_8h_source.html#l00250">element.h:250</a></div></div>
<div class="ttc" id="aclassConductor_html_a8e1b9e04db1bc058bb5c7d9755eff693"><div class="ttname"><a href="../../d3/d84/classConductor.html#a8e1b9e04db1bc058bb5c7d9755eff693">Conductor::must_highlight_</a></div><div class="ttdeci">Highlight must_highlight_</div><div class="ttdoc">Define whether and how the conductor should be highlighted.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00187">conductor.h:187</a></div></div>
<div class="ttc" id="aclassConductorTextItem_html"><div class="ttname"><a href="../../da/d11/classConductorTextItem.html">ConductorTextItem</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/conductortextitem_8h_source.html#l00029">conductortextitem.h:30</a></div></div>
<div class="ttc" id="aclassConductor_html_ad061b78a3976c1b05f05f839fcb00cde"><div class="ttname"><a href="../../d3/d84/classConductor.html#ad061b78a3976c1b05f05f839fcb00cde">Conductor::adjusteHandlerPos</a></div><div class="ttdeci">void adjusteHandlerPos()</div><div class="ttdoc">Conductor::adjusteHandlerPos Adjust the position of the handler item.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00753">conductor.cpp:753</a></div></div>
<div class="ttc" id="aclassConductor_html_ab42995a924568fbce27990580ded2eeb"><div class="ttname"><a href="../../d3/d84/classConductor.html#ab42995a924568fbce27990580ded2eeb">Conductor::m_mouse_over</a></div><div class="ttdeci">bool m_mouse_over</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00166">conductor.h:166</a></div></div>
<div class="ttc" id="aclassConductorProfile_html_a0f9eb955fae2302b5fe1f98c685c7bb5"><div class="ttname"><a href="../../de/d50/classConductorProfile.html#a0f9eb955fae2302b5fe1f98c685c7bb5">ConductorProfile::horizontalSegments</a></div><div class="ttdeci">QList&lt; ConductorSegmentProfile * &gt; horizontalSegments()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/conductorprofile_8cpp_source.html#l00115">conductorprofile.cpp:115</a></div></div>
<div class="ttc" id="aclassConductor_html_ab32bd11b8874c7b45d1127c640477218"><div class="ttname"><a href="../../d3/d84/classConductor.html#ab32bd11b8874c7b45d1127c640477218">Conductor::posForText</a></div><div class="ttdeci">QPointF posForText(Qt::Orientations &amp;flag)</div><div class="ttdoc">Conductor::posForText Calculate and return the better pos for text.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01219">conductor.cpp:1219</a></div></div>
<div class="ttc" id="aclassConductorProfile_html_ac6c6820aae624e5d765a31a64a0c13cc"><div class="ttname"><a href="../../de/d50/classConductorProfile.html#ac6c6820aae624e5d765a31a64a0c13cc">ConductorProfile::height</a></div><div class="ttdeci">qreal height() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/conductorprofile_8cpp_source.html#l00092">conductorprofile.cpp:92</a></div></div>
<div class="ttc" id="aconductor_8h_html"><div class="ttname"><a href="../../d7/d0f/conductor_8h.html">conductor.h</a></div></div>
<div class="ttc" id="aclassConductor_html_a9f867194e70f4dc63c9d1c0461e743e7"><div class="ttname"><a href="../../d3/d84/classConductor.html#a9f867194e70f4dc63c9d1c0461e743e7">Conductor::m_valid</a></div><div class="ttdeci">bool m_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00188">conductor.h:188</a></div></div>
<div class="ttc" id="aclassQPropertyUndoCommand_html"><div class="ttname"><a href="../../df/d51/classQPropertyUndoCommand.html">QPropertyUndoCommand</a></div><div class="ttdoc">The QPropertyUndoCommand class This undo command manage QProperty of a QObject. This undo command can...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d34/qpropertyundocommand_8h_source.html#l00033">qpropertyundocommand.h:34</a></div></div>
<div class="ttc" id="anamespaceQET_html_a8c06162adcffa1bc992082e3fc4705a7"><div class="ttname"><a href="../../d3/d9a/namespaceQET.html#a8c06162adcffa1bc992082e3fc4705a7">QET::orthogonalProjection</a></div><div class="ttdeci">bool orthogonalProjection(const QPointF &amp;, const QLineF &amp;, QPointF *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d30/qet_8cpp_source.html#l00166">qet.cpp:166</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html">autonum::sequentialNumbers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6f/assignvariables_8h_source.html#l00034">assignvariables.h:35</a></div></div>
<div class="ttc" id="anamespaceQET_html_a4b89ec5286ac7d239614dd3597e60339a32994dd97504d378777f3cdddcf4c2dd"><div class="ttname"><a href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a32994dd97504d378777f3cdddcf4c2dd">QET::Both</a></div><div class="ttdeci">@ Both</div><div class="ttdoc">Invalid segment.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00092">qet.h:91</a></div></div>
<div class="ttc" id="aclassConductor_html_a4beaa3a1d188750fc12ccfdf1108173a"><div class="ttname"><a href="../../d3/d84/classConductor.html#a4beaa3a1d188750fc12ccfdf1108173a">Conductor::profiles</a></div><div class="ttdeci">ConductorProfilesGroup profiles() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01916">conductor.cpp:1916</a></div></div>
<div class="ttc" id="aclassConductorProfile_html_af724e7448a3b337a8234e186aadd8b98"><div class="ttname"><a href="../../de/d50/classConductorProfile.html#af724e7448a3b337a8234e186aadd8b98">ConductorProfile::segmentsCount</a></div><div class="ttdeci">uint segmentsCount(QET::ConductorSegmentType) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/conductorprofile_8cpp_source.html#l00104">conductorprofile.cpp:104</a></div></div>
<div class="ttc" id="aclassConductor_html_a910b9c82821697e07931e212a4ab3891"><div class="ttname"><a href="../../d3/d84/classConductor.html#a910b9c82821697e07931e212a4ab3891">Conductor::m_previous_z_value</a></div><div class="ttdeci">qreal m_previous_z_value</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00176">conductor.h:176</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_abbf0e0a7bd1ed08882854411eaaad093"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#abbf0e0a7bd1ed08882854411eaaad093">ConductorProperties::style</a></div><div class="ttdeci">Qt::PenStyle style</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00110">conductorproperties.h:110</a></div></div>
<div class="ttc" id="aclassConductor_html_ae179dfb31032f55b10d9a3200aa15acf"><div class="ttname"><a href="../../d3/d84/classConductor.html#ae179dfb31032f55b10d9a3200aa15acf">Conductor::segmentsToPath</a></div><div class="ttdeci">void segmentsToPath()</div><div class="ttdoc">Conductor::segmentsToPath Generate the QPainterPath from the list of points.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00177">conductor.cpp:177</a></div></div>
<div class="ttc" id="aconductortextitem_8h_html"><div class="ttname"><a href="../../de/dcc/conductortextitem_8h.html">conductortextitem.h</a></div></div>
<div class="ttc" id="aclassConductor_html_aa83dfdc65aa93359f824a5727633c72a"><div class="ttname"><a href="../../d3/d84/classConductor.html#aa83dfdc65aa93359f824a5727633c72a">Conductor::m_text_item</a></div><div class="ttdeci">ConductorTextItem * m_text_item</div><div class="ttdoc">Text input for non simple, non-singleline conductors.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00170">conductor.h:170</a></div></div>
<div class="ttc" id="aconductor_8cpp_html_a7255f2a0d5739fa13352d03e061fc893"><div class="ttname"><a href="../../d9/d9d/conductor_8cpp.html#a7255f2a0d5739fa13352d03e061fc893">longuestConductorInPotential</a></div><div class="ttdeci">Conductor * longuestConductorInPotential(Conductor *conductor, bool all_diagram)</div><div class="ttdoc">longuestConductorInPotential</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l02005">conductor.cpp:2005</a></div></div>
<div class="ttc" id="aclassConductor_html_a0fcc485fbf5c2fd54c857ac2ea69ab56"><div class="ttname"><a href="../../d3/d84/classConductor.html#a0fcc485fbf5c2fd54c857ac2ea69ab56">Conductor::sceneEventFilter</a></div><div class="ttdeci">bool sceneEventFilter(QGraphicsItem *watched, QEvent *event) override</div><div class="ttdoc">Conductor::sceneEventFilter.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00710">conductor.cpp:710</a></div></div>
<div class="ttc" id="aclassConductor_html_af64c0e2865fdceab4fe33467c06d7f1c"><div class="ttname"><a href="../../d3/d84/classConductor.html#af64c0e2865fdceab4fe33467c06d7f1c">Conductor::mousePressEvent</a></div><div class="ttdeci">void mousePressEvent(QGraphicsSceneMouseEvent *event) override</div><div class="ttdoc">Conductor::mousePressEvent Manage the mouse press event.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00623">conductor.cpp:623</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_aed1a6490738c5df7db003b96c75a221a"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#aed1a6490738c5df7db003b96c75a221a">autonum::sequentialNumbers::fromXml</a></div><div class="ttdeci">void fromXml(const QDomElement &amp;element)</div><div class="ttdoc">sequentialNumbers::fromXml Import sequential values from a QDomElement</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dbe/assignvariables_8cpp_source.html#l00138">assignvariables.cpp:138</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a33baf8ef02236120a3fa80da49e2eee3"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a33baf8ef02236120a3fa80da49e2eee3">ConductorProperties::verti_rotate_text</a></div><div class="ttdeci">double verti_rotate_text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00100">conductorproperties.h:100</a></div></div>
<div class="ttc" id="aclassConductor_html_a9170d235e1a117bdc709e64df05f2397"><div class="ttname"><a href="../../d3/d84/classConductor.html#a9170d235e1a117bdc709e64df05f2397">Conductor::terminal2</a></div><div class="ttdeci">Terminal * terminal2</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00068">conductor.h:68</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a077f9f26788dc64bd31b25b1bd4465e8"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a077f9f26788dc64bd31b25b1bd4465e8">ConductorProperties::m_wire_section</a></div><div class="ttdeci">QString m_wire_section</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00093">conductorproperties.h:93</a></div></div>
<div class="ttc" id="aclassDiagram_html_ac017014f1be4db392204038141222505"><div class="ttname"><a href="../../da/d91/classDiagram.html#ac017014f1be4db392204038141222505">Diagram::yGrid</a></div><div class="ttdeci">static int yGrid</div><div class="ttdoc">ordinate grid step size</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1b/diagram_8h_source.html#l00087">diagram.h:87</a></div></div>
<div class="ttc" id="aclassConductor_html_aa7dd52ce69db4424acb6511676c88821"><div class="ttname"><a href="../../d3/d84/classConductor.html#aa7dd52ce69db4424acb6511676c88821">Conductor::setProfile</a></div><div class="ttdeci">void setProfile(const ConductorProfile &amp;, Qt::Corner)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01425">conductor.cpp:1425</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_addfbee133c7ebb9667230520d80e6ce0"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#addfbee133c7ebb9667230520d80e6ce0">ConductorProperties::m_function</a></div><div class="ttdeci">QString m_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00090">conductorproperties.h:90</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a63eb9a69a0c66efa2a19ee51383b76a0"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a63eb9a69a0c66efa2a19ee51383b76a0">ConductorProperties::m_show_text</a></div><div class="ttdeci">bool m_show_text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00103">conductorproperties.h:103</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_af1439a082eeac27037086dc36b96a1ada28636edb39fb4cdc55cc9b6779f681dd"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#af1439a082eeac27037086dc36b96a1ada28636edb39fb4cdc55cc9b6779f681dd">ConductorProperties::Multi</a></div><div class="ttdeci">@ Multi</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00079">conductorproperties.h:79</a></div></div>
<div class="ttc" id="aclassConductor_html_a5f3938c409d36029c1ccd22f0b9bca8b"><div class="ttname"><a href="../../d3/d84/classConductor.html#a5f3938c409d36029c1ccd22f0b9bca8b">Conductor::pos</a></div><div class="ttdeci">QPointF pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00223">conductor.h:46</a></div></div>
<div class="ttc" id="aclassConductor_html_a43b721bd32ec14ad376f1f86e3d7ad07"><div class="ttname"><a href="../../d3/d84/classConductor.html#a43b721bd32ec14ad376f1f86e3d7ad07">Conductor::generateConductorPath</a></div><div class="ttdeci">void generateConductorPath(const QPointF &amp;, Qet::Orientation, const QPointF &amp;, Qet::Orientation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00346">conductor.cpp:346</a></div></div>
<div class="ttc" id="aclassQet_html_a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5"><div class="ttname"><a href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88ac0ad4cc2f5ffa53e690722bdb2aa0db5">Qet::East</a></div><div class="ttdeci">@ East</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00207">qet.h:207</a></div></div>
<div class="ttc" id="aclassConductor_html_a9a90b13a4ecbff5790c8f82f6231f99d"><div class="ttname"><a href="../../d3/d84/classConductor.html#a9a90b13a4ecbff5790c8f82f6231f99d">Conductor::handlerPoints</a></div><div class="ttdeci">QVector&lt; QPointF &gt; handlerPoints() const</div><div class="ttdoc">Conductor::handlerPoints.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01153">conductor.cpp:1153</a></div></div>
<div class="ttc" id="aclassConductor_html_a5a61e13a2d1cb44526277798884a0b8b"><div class="ttname"><a href="../../d3/d84/classConductor.html#a5a61e13a2d1cb44526277798884a0b8b">Conductor::itemChange</a></div><div class="ttdeci">QVariant itemChange(GraphicsItemChange, const QVariant &amp;) override</div><div class="ttdoc">Conductor::itemChange.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00669">conductor.cpp:669</a></div></div>
<div class="ttc" id="aterminal_8cpp_html_a0d860470dc66715c56fd2cad5e2dd9bb"><div class="ttname"><a href="../../d8/dc7/terminal_8cpp.html#a0d860470dc66715c56fd2cad5e2dd9bb">relatedPotentialTerminal</a></div><div class="ttdeci">QList&lt; Terminal * &gt; relatedPotentialTerminal(const Terminal *terminal, const bool all_diagram)</div><div class="ttdoc">Conductor::relatedPotentialTerminal Return terminal at the same potential from the same parent elemen...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/terminal_8cpp_source.html#l00841">terminal.cpp:841</a></div></div>
<div class="ttc" id="aclassConductor_html_a07c8275e0b9f492d00bbaa489a5bbb7e"><div class="ttname"><a href="../../d3/d84/classConductor.html#a07c8275e0b9f492d00bbaa489a5bbb7e">Conductor::m_autoNum_seq</a></div><div class="ttdeci">autonum::sequentialNumbers m_autoNum_seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00137">conductor.h:137</a></div></div>
<div class="ttc" id="aclassConductor_html_a4272fa407d1088bd4f6e99c8c82a35a4"><div class="ttname"><a href="../../d3/d84/classConductor.html#a4272fa407d1088bd4f6e99c8c82a35a4">Conductor::path</a></div><div class="ttdeci">QPainterPath path() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01491">conductor.cpp:1491</a></div></div>
<div class="ttc" id="aclassConductor_html_a3f2a923b69927a1477da3017af7c6fce"><div class="ttname"><a href="../../d3/d84/classConductor.html#a3f2a923b69927a1477da3017af7c6fce">Conductor::handlerMouseReleaseEvent</a></div><div class="ttdeci">void handlerMouseReleaseEvent(QetGraphicsHandlerItem *qghi, QGraphicsSceneMouseEvent *event)</div><div class="ttdoc">Conductor::handlerMouseReleaseEvent.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00822">conductor.cpp:822</a></div></div>
<div class="ttc" id="aclassConductor_html_ace529b961efd74335176878d22699add"><div class="ttname"><a href="../../d3/d84/classConductor.html#ace529b961efd74335176878d22699add">Conductor::paint</a></div><div class="ttdeci">void paint(QPainter *, const QStyleOptionGraphicsItem *, QWidget *) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00475">conductor.cpp:475</a></div></div>
<div class="ttc" id="anamespaceQET_1_1Icons_html_af834c6e3bdd9708fecb33edf23c5aca6"><div class="ttname"><a href="../../d1/d51/namespaceQET_1_1Icons.html#af834c6e3bdd9708fecb33edf23c5aca6">QET::Icons::tr</a></div><div class="ttdeci">QIcon tr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3c/qeticons_8cpp_source.html#l00206">qeticons.cpp:206</a></div></div>
<div class="ttc" id="aclassConductorXmlRetroCompatibility_html_af087d12d540554849387ca74eb8ca152"><div class="ttname"><a href="../../d4/dab/classConductorXmlRetroCompatibility.html#af087d12d540554849387ca74eb8ca152">ConductorXmlRetroCompatibility::loadSequential</a></div><div class="ttdeci">static void loadSequential(const QDomElement &amp;dom_element, Conductor *conductor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00056">conductor.cpp:56</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_af080783f422f4cb8781a3b54fbb861cc"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#af080783f422f4cb8781a3b54fbb861cc">ConductorProperties::text_size</a></div><div class="ttdeci">int text_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00096">conductorproperties.h:96</a></div></div>
<div class="ttc" id="aclassConductorXmlRetroCompatibility_html"><div class="ttname"><a href="../../d4/dab/classConductorXmlRetroCompatibility.html">ConductorXmlRetroCompatibility</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00042">conductor.cpp:43</a></div></div>
<div class="ttc" id="aclassConductor_html_a649d3839caef33cd2d47759f82e68a08"><div class="ttname"><a href="../../d3/d84/classConductor.html#a649d3839caef33cd2d47759f82e68a08">Conductor::boundingRect</a></div><div class="ttdeci">QRectF boundingRect() const override</div><div class="ttdoc">Conductor::boundingRect.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00878">conductor.cpp:878</a></div></div>
<div class="ttc" id="aclassautonum_1_1AssignVariables_html_abf8fecd78bdaa59e34a2f7da7af6ebcf"><div class="ttname"><a href="../../d0/d66/classautonum_1_1AssignVariables.html#abf8fecd78bdaa59e34a2f7da7af6ebcf">autonum::AssignVariables::formulaToLabel</a></div><div class="ttdeci">static QString formulaToLabel(QString formula, sequentialNumbers &amp;seqStruct, Diagram *diagram, const Element *elmt=nullptr)</div><div class="ttdoc">AssignVariables::formulaToLabel Return the formula with variable assigned (ready to be displayed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dbe/assignvariables_8cpp_source.html#l00187">assignvariables.cpp:187</a></div></div>
<div class="ttc" id="aclassConductorSegment_html_aeb8047230822998b478445073624bea9"><div class="ttname"><a href="../../dc/d5b/classConductorSegment.html#aeb8047230822998b478445073624bea9">ConductorSegment::previousSegment</a></div><div class="ttdeci">ConductorSegment * previousSegment() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dee/conductorsegment_8cpp_source.html#l00421">conductorsegment.cpp:421</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a428e3107593efa5b0bc4481485fb7fa6"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a428e3107593efa5b0bc4481485fb7fa6">ConductorProperties::m_dash_size</a></div><div class="ttdeci">int m_dash_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00097">conductorproperties.h:97</a></div></div>
<div class="ttc" id="aclassChangeConductorCommand_html"><div class="ttname"><a href="../../df/db7/classChangeConductorCommand.html">ChangeConductorCommand</a></div><div class="ttdoc">The ChangeConductorCommand class This command changes a particular conductor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8a/diagramcommands_8h_source.html#l00239">diagramcommands.h:239</a></div></div>
<div class="ttc" id="aclassConductorSegment_html"><div class="ttname"><a href="../../dc/d5b/classConductorSegment.html">ConductorSegment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9f/conductorsegment_8h_source.html#l00025">conductorsegment.h:25</a></div></div>
<div class="ttc" id="aclassQETProject_html_ae21580f2faa0d4677b948b6f489315ad"><div class="ttname"><a href="../../d1/d80/classQETProject.html#ae21580f2faa0d4677b948b6f489315ad">QETProject::projectDiagramsOrderChanged</a></div><div class="ttdeci">void projectDiagramsOrderChanged(QETProject *, int, int)</div></div>
<div class="ttc" id="aclassConductorTextItem_html_aa034d0138c794cc3b05e2b1d31e12a44"><div class="ttname"><a href="../../da/d11/classConductorTextItem.html#aa034d0138c794cc3b05e2b1d31e12a44">ConductorTextItem::wasMovedByUser</a></div><div class="ttdeci">virtual bool wasMovedByUser() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/conductortextitem_8cpp_source.html#l00084">conductortextitem.cpp:84</a></div></div>
<div class="ttc" id="aclassConductorXmlRetroCompatibility_html_ac18f39e1cc876ae47c544087f529ff9b"><div class="ttname"><a href="../../d4/dab/classConductorXmlRetroCompatibility.html#ac18f39e1cc876ae47c544087f529ff9b">ConductorXmlRetroCompatibility::loadSequential</a></div><div class="ttdeci">static void loadSequential(const QDomElement &amp;dom_element, const QString &amp;seq, QStringList *list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00046">conductor.cpp:46</a></div></div>
<div class="ttc" id="aclassDiagramTextItem_html_ac7846e57c76dabcdf2bc186242a54a1a"><div class="ttname"><a href="../../dc/d0e/classDiagramTextItem.html#ac7846e57c76dabcdf2bc186242a54a1a">DiagramTextItem::setPlainText</a></div><div class="ttdeci">void setPlainText(const QString &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d93/diagramtextitem_8cpp_source.html#l00218">diagramtextitem.cpp:218</a></div></div>
<div class="ttc" id="aclassConductor_html_ae2a6458dc6a6f8f8fefec4581a80c107"><div class="ttname"><a href="../../d3/d84/classConductor.html#ae2a6458dc6a6f8f8fefec4581a80c107">Conductor::m_moving_segment</a></div><div class="ttdeci">bool m_moving_segment</div><div class="ttdoc">Attributs related to mouse interaction.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00174">conductor.h:174</a></div></div>
<div class="ttc" id="aclassQetGraphicsHandlerItem_html_a2267c547e216942fad72639c6e1de06fa6aecc5d12fce4be4a17f2dbbc941e8ae"><div class="ttname"><a href="../../de/df5/classQetGraphicsHandlerItem.html#a2267c547e216942fad72639c6e1de06fa6aecc5d12fce4be4a17f2dbbc941e8ae">QetGraphicsHandlerItem::Type</a></div><div class="ttdeci">@ Type</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d91/qetgraphicshandleritem_8h_source.html#l00042">qetgraphicshandleritem.h:42</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a52164e39c748f6faea91054fba300849"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a52164e39c748f6faea91054fba300849">ConductorProperties::text_color</a></div><div class="ttdeci">QColor text_color</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00087">conductorproperties.h:87</a></div></div>
<div class="ttc" id="aclassDiagram_html_a8bcc3268e7dd96d8347cb402b4c964c6"><div class="ttname"><a href="../../da/d91/classDiagram.html#a8bcc3268e7dd96d8347cb402b4c964c6">Diagram::xGrid</a></div><div class="ttdeci">static int xGrid</div><div class="ttdoc">abscissa grid step size</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1b/diagram_8h_source.html#l00085">diagram.h:85</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a45222c405b422b79539d160027617977"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a45222c405b422b79539d160027617977">ConductorProperties::text</a></div><div class="ttdeci">QString text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00089">conductorproperties.h:89</a></div></div>
<div class="ttc" id="aclassConductorSegmentProfile_html"><div class="ttname"><a href="../../db/deb/classConductorSegmentProfile.html">ConductorSegmentProfile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/conductorsegmentprofile_8h_source.html#l00026">conductorsegmentprofile.h:26</a></div></div>
<div class="ttc" id="anumerotationcontextcommands_8h_html"><div class="ttname"><a href="../../da/d60/numerotationcontextcommands_8h.html">numerotationcontextcommands.h</a></div></div>
<div class="ttc" id="aclassConductor_html_ab8b59894e85705f874a8e2fbb7b8fb96"><div class="ttname"><a href="../../d3/d84/classConductor.html#ab8b59894e85705f874a8e2fbb7b8fb96">Conductor::segmentsList</a></div><div class="ttdeci">const QList&lt; ConductorSegment * &gt; segmentsList() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01171">conductor.cpp:1171</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_a85a5919f823c375a4b3a60652c2bfef8"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a85a5919f823c375a4b3a60652c2bfef8">autonum::sequentialNumbers::ten_folio</a></div><div class="ttdeci">QStringList ten_folio</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6f/assignvariables_8h_source.html#l00052">assignvariables.h:52</a></div></div>
<div class="ttc" id="aclassDiagramTextItem_html_a95006abe16806c3889216c8834db7ddf"><div class="ttname"><a href="../../dc/d0e/classDiagramTextItem.html#a95006abe16806c3889216c8834db7ddf">DiagramTextItem::textEdited</a></div><div class="ttdeci">void textEdited(const QString &amp;old_str, const QString &amp;new_str)</div></div>
<div class="ttc" id="aclassConductor_html_a4b456d8635657c65a29c3d42903b4924"><div class="ttname"><a href="../../d3/d84/classConductor.html#a4b456d8635657c65a29c3d42903b4924">Conductor::properties</a></div><div class="ttdeci">ConductorProperties properties</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00223">conductor.h:48</a></div></div>
<div class="ttc" id="anamespaceQET_html_a4b89ec5286ac7d239614dd3597e60339a59a5666d61c720bfe380711bbf4327e5"><div class="ttname"><a href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a59a5666d61c720bfe380711bbf4327e5">QET::Horizontal</a></div><div class="ttdeci">@ Horizontal</div><div class="ttdoc">Horizontal segment.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00089">qet.h:89</a></div></div>
<div class="ttc" id="aclassDiagramTextItem_html_a6f9c42c1b034d4ebfb432ec0f1add131"><div class="ttname"><a href="../../dc/d0e/classDiagramTextItem.html#a6f9c42c1b034d4ebfb432ec0f1add131">DiagramTextItem::font</a></div><div class="ttdeci">QFont font</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/diagramtextitem_8h_source.html#l00001">diagramtextitem.h:40</a></div></div>
<div class="ttc" id="aclassConductor_html_a7df52a1f89a88dad4ecd531c9d02675f"><div class="ttname"><a href="../../d3/d84/classConductor.html#a7df52a1f89a88dad4ecd531c9d02675f">Conductor::relatedPotentialConductors</a></div><div class="ttdeci">QSet&lt; Conductor * &gt; relatedPotentialConductors(const bool all_diagram=true, QList&lt; Terminal * &gt; *t_list=nullptr)</div><div class="ttdoc">Conductor::relatedPotentialConductors Return all conductors at the same potential of this conductor,...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01647">conductor.cpp:1647</a></div></div>
<div class="ttc" id="anamespaceQET_1_1Icons_html_af5e509afc46ed28dd2f2092b01e6b227"><div class="ttname"><a href="../../d1/d51/namespaceQET_1_1Icons.html#af5e509afc46ed28dd2f2092b01e6b227">QET::Icons::br</a></div><div class="ttdeci">QIcon br</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3c/qeticons_8cpp_source.html#l00185">qeticons.cpp:185</a></div></div>
<div class="ttc" id="aclassConductorSegment_html_a35228a00501c2a046076c58e4642c255"><div class="ttname"><a href="../../dc/d5b/classConductorSegment.html#a35228a00501c2a046076c58e4642c255">ConductorSegment::middle</a></div><div class="ttdeci">QPointF middle() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dee/conductorsegment_8cpp_source.html#l00493">conductorsegment.cpp:493</a></div></div>
<div class="ttc" id="aclassConductor_html_ac6a16f9e398282ceb21a1f9af2811cc3"><div class="ttname"><a href="../../d3/d84/classConductor.html#ac6a16f9e398282ceb21a1f9af2811cc3">Conductor::saveProfile</a></div><div class="ttdeci">void saveProfile(bool=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01386">conductor.cpp:1386</a></div></div>
<div class="ttc" id="aclassConductor_html_a015b1f66cea917ce4959e64d5f66b3d6"><div class="ttname"><a href="../../d3/d84/classConductor.html#a015b1f66cea917ce4959e64d5f66b3d6">Conductor::has_to_save_profile</a></div><div class="ttdeci">bool has_to_save_profile</div><div class="ttdoc">Whether the current profile should be saved as soon as possible.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00182">conductor.h:182</a></div></div>
<div class="ttc" id="aclassConductor_html_a189d20f735051205a4de96c87d0db9cc"><div class="ttname"><a href="../../d3/d84/classConductor.html#a189d20f735051205a4de96c87d0db9cc">Conductor::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Conductor::isValid.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00150">conductor.cpp:150</a></div></div>
<div class="ttc" id="aclassTerminal_html_a35ee48aaa14c345828ba931876dba1c9"><div class="ttname"><a href="../../d9/ded/classTerminal.html#a35ee48aaa14c345828ba931876dba1c9">Terminal::removeConductor</a></div><div class="ttdeci">void removeConductor(Conductor *conductor)</div><div class="ttdoc">Terminal::removeConductor Remove a conductor from this terminal.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/terminal_8cpp_source.html#l00239">terminal.cpp:239</a></div></div>
<div class="ttc" id="aclassConductor_html_a76859ff778f0d9af3ca6d7bc84c26e6d"><div class="ttname"><a href="../../d3/d84/classConductor.html#a76859ff778f0d9af3ca6d7bc84c26e6d">Conductor::Conductor</a></div><div class="ttdeci">Conductor(Terminal *, Terminal *)</div><div class="ttdoc">Conductor::Conductor Default constructor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00077">conductor.cpp:77</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_aec73021c704d5f0643de9bf93338307e"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#aec73021c704d5f0643de9bf93338307e">ConductorProperties::singleLineProperties</a></div><div class="ttdeci">SingleLineProperties singleLineProperties</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00112">conductorproperties.h:112</a></div></div>
<div class="ttc" id="aclassConductor_html_ae2630c973b231d90da11294af4d43357"><div class="ttname"><a href="../../d3/d84/classConductor.html#ae2630c973b231d90da11294af4d43357">Conductor::propertiesChange</a></div><div class="ttdeci">void propertiesChange()</div></div>
<div class="ttc" id="aclassConductor_html_af2f106ce228e9dff58d4002bf6c946e8"><div class="ttname"><a href="../../d3/d84/classConductor.html#af2f106ce228e9dff58d4002bf6c946e8">Conductor::updatePath</a></div><div class="ttdeci">void updatePath(const QRectF &amp;=QRectF())</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00161">conductor.cpp:161</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a6522d09e41df43edbea7d26dcf8e3172"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a6522d09e41df43edbea7d26dcf8e3172">ConductorProperties::m_tension_protocol</a></div><div class="ttdeci">QString m_tension_protocol</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00091">conductorproperties.h:91</a></div></div>
<div class="ttc" id="aclassTerminal_html_a675199cb4cf139c7bb667ba7ecf5a7eb"><div class="ttname"><a href="../../d9/ded/classTerminal.html#a675199cb4cf139c7bb667ba7ecf5a7eb">Terminal::diagram</a></div><div class="ttdeci">Diagram * diagram() const</div><div class="ttdoc">Terminal::diagram.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/terminal_8cpp_source.html#l00814">terminal.cpp:814</a></div></div>
<div class="ttc" id="aclassQet_html_a406a5910496b8aee9d5127ebef76ba88"><div class="ttname"><a href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88">Qet::Orientation</a></div><div class="ttdeci">Orientation</div><div class="ttdoc">Orientation (used for electrical elements and their terminals)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00206">qet.h:206</a></div></div>
<div class="ttc" id="aclassConductor_html_a8c48237171938b9962367c2af665d92f"><div class="ttname"><a href="../../d3/d84/classConductor.html#a8c48237171938b9962367c2af665d92f">Conductor::extendTerminal</a></div><div class="ttdeci">static QPointF extendTerminal(const QPointF &amp;, Qet::Orientation, qreal=9.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00449">conductor.cpp:449</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_a5d687806008632a20c5cdf305f137d9d"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a5d687806008632a20c5cdf305f137d9d">autonum::sequentialNumbers::ten</a></div><div class="ttdeci">QStringList ten</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6f/assignvariables_8h_source.html#l00051">assignvariables.h:51</a></div></div>
<div class="ttc" id="aclassConductorPropertiesDialog_html_a2345b73499b5756d9b3941dda9ad6f37"><div class="ttname"><a href="../../d1/d61/classConductorPropertiesDialog.html#a2345b73499b5756d9b3941dda9ad6f37">ConductorPropertiesDialog::PropertiesDialog</a></div><div class="ttdeci">static void PropertiesDialog(Conductor *conductor, QWidget *parent=nullptr)</div><div class="ttdoc">ConductorPropertiesDialog::PropertiesDialog Static method for open and apply properties.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d85/conductorpropertiesdialog_8cpp_source.html#l00062">conductorpropertiesdialog.cpp:62</a></div></div>
<div class="ttc" id="aclassTerminal_html_a31d1c604e0f9991140ad938c741df3af"><div class="ttname"><a href="../../d9/ded/classTerminal.html#a31d1c604e0f9991140ad938c741df3af">Terminal::conductors</a></div><div class="ttdeci">QList&lt; Conductor * &gt; conductors() const</div><div class="ttdoc">Terminal::conductors.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/terminal_8cpp_source.html#l00715">terminal.cpp:715</a></div></div>
<div class="ttc" id="aclassConductor_html_a0875fa9aca5e003ba6746e0e1f2d5c99"><div class="ttname"><a href="../../d3/d84/classConductor.html#a0875fa9aca5e003ba6746e0e1f2d5c99">Conductor::setSequenceNum</a></div><div class="ttdeci">void setSequenceNum(const autonum::sequentialNumbers &amp;sn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01721">conductor.cpp:1721</a></div></div>
<div class="ttc" id="aclassConductor_html_a3c7bd8e59efaa5f9c9a02f37ade90555"><div class="ttname"><a href="../../d3/d84/classConductor.html#a3c7bd8e59efaa5f9c9a02f37ade90555">Conductor::segmentsCount</a></div><div class="ttdeci">uint segmentsCount(QET::ConductorSegmentType=QET::Both) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00916">conductor.cpp:916</a></div></div>
<div class="ttc" id="aclassQet_html_a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56"><div class="ttname"><a href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a114008ac5eed4f33e9d99b40568d8a56">Qet::North</a></div><div class="ttdeci">@ North</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00206">qet.h:206</a></div></div>
<div class="ttc" id="aclassQetGraphicsHandlerItem_html_a27ff7e1e214f07ada35dce0d79dc58a2"><div class="ttname"><a href="../../de/df5/classQetGraphicsHandlerItem.html#a27ff7e1e214f07ada35dce0d79dc58a2">QetGraphicsHandlerItem::handlerForPoint</a></div><div class="ttdeci">static QVector&lt; QetGraphicsHandlerItem * &gt; handlerForPoint(const QVector&lt; QPointF &gt; &amp;points, int size=10)</div><div class="ttdoc">QetGraphicsHandlerItem::handlerForPoint.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d78/qetgraphicshandleritem_8cpp_source.html#l00087">qetgraphicshandleritem.cpp:87</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_aa876ec3f716d3079f4af28f4bd32d771"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#aa876ec3f716d3079f4af28f4bd32d771">ConductorProperties::m_vertical_alignment</a></div><div class="ttdeci">Qt::Alignment m_vertical_alignment</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00108">conductorproperties.h:108</a></div></div>
<div class="ttc" id="aconductor_8h_html_ae0511082eaa876e0d6b6d88367998be8"><div class="ttname"><a href="../../d7/d0f/conductor_8h.html#ae0511082eaa876e0d6b6d88367998be8">ConductorProfilesGroup</a></div><div class="ttdeci">QHash&lt; Qt::Corner, ConductorProfile &gt; ConductorProfilesGroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00037">conductor.h:37</a></div></div>
<div class="ttc" id="aclassTerminal_html_ac340d783725154a9f4bca74588ec3209"><div class="ttname"><a href="../../d9/ded/classTerminal.html#ac340d783725154a9f4bca74588ec3209">Terminal::uuid</a></div><div class="ttdeci">QUuid uuid() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/terminal_8cpp_source.html#l00826">terminal.cpp:826</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_aa38bf112eea4e01b94268d3af2db5a01"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#aa38bf112eea4e01b94268d3af2db5a01">autonum::sequentialNumbers::unit</a></div><div class="ttdeci">QStringList unit</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6f/assignvariables_8h_source.html#l00049">assignvariables.h:49</a></div></div>
<div class="ttc" id="anamespaceQET_1_1Icons_html_ae10a7bcb8302c45b0fb16eed785b4ead"><div class="ttname"><a href="../../d1/d51/namespaceQET_1_1Icons.html#ae10a7bcb8302c45b0fb16eed785b4ead">QET::Icons::Orientations</a></div><div class="ttdeci">QIcon Orientations</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3c/qeticons_8cpp_source.html#l00126">qeticons.cpp:126</a></div></div>
<div class="ttc" id="aelement_8h_html"><div class="ttname"><a href="../../d4/dfe/element_8h.html">element.h</a></div></div>
<div class="ttc" id="aclassConductor_html_a8099231eca7f72573c51ea77b8c39af9"><div class="ttname"><a href="../../d3/d84/classConductor.html#a8099231eca7f72573c51ea77b8c39af9">Conductor::setPath</a></div><div class="ttdeci">void setPath(const QPainterPath &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01481">conductor.cpp:1481</a></div></div>
<div class="ttc" id="aclassConductor_html_ab411f57a5b904c59f513c3afaefb054b"><div class="ttname"><a href="../../d3/d84/classConductor.html#ab411f57a5b904c59f513c3afaefb054b">Conductor::setUpConnectionForFormula</a></div><div class="ttdeci">void setUpConnectionForFormula(QString old_formula, QString new_formula)</div><div class="ttdoc">Conductor::setUpConnectionForFormula setup connection according to the variable of formula.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01733">conductor.cpp:1733</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_af1439a082eeac27037086dc36b96a1ada8094aff20c96bf2e0cb996989762c5ab"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#af1439a082eeac27037086dc36b96a1ada8094aff20c96bf2e0cb996989762c5ab">ConductorProperties::Single</a></div><div class="ttdeci">@ Single</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00079">conductorproperties.h:79</a></div></div>
<div class="ttc" id="aclassConductor_html_a971beedc17f0729c9026ac917da133a5"><div class="ttname"><a href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5">Conductor::Highlight</a></div><div class="ttdeci">Highlight</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00065">conductor.h:65</a></div></div>
<div class="ttc" id="aclassDiagram_html_a5bc94725d451ecf6cfdf6844448602ba"><div class="ttname"><a href="../../da/d91/classDiagram.html#a5bc94725d451ecf6cfdf6844448602ba">Diagram::defaultConductorProperties</a></div><div class="ttdeci">ConductorProperties defaultConductorProperties</div><div class="ttdoc">Default properties for new conductors.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1b/diagram_8h_source.html#l00081">diagram.h:81</a></div></div>
<div class="ttc" id="aclassConductor_html_a824be7024a9ec6f7dfb2ee5a652a0a5e"><div class="ttname"><a href="../../d3/d84/classConductor.html#a824be7024a9ec6f7dfb2ee5a652a0a5e">Conductor::modified_path</a></div><div class="ttdeci">bool modified_path</div><div class="ttdoc">Whether the conductor was manually modified by users.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00180">conductor.h:180</a></div></div>
<div class="ttc" id="aqpropertyundocommand_8h_html"><div class="ttname"><a href="../../d0/d34/qpropertyundocommand_8h.html">qpropertyundocommand.h</a></div></div>
<div class="ttc" id="aclassConductor_html_ab33e66bb9b491275761142290b376161"><div class="ttname"><a href="../../d3/d84/classConductor.html#ab33e66bb9b491275761142290b376161">Conductor::removeHandler</a></div><div class="ttdeci">void removeHandler()</div><div class="ttdoc">Conductor::removeHandler Remove the handlers of this item.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00865">conductor.cpp:865</a></div></div>
<div class="ttc" id="aclassConductor_html_a70258ed0503b873d68d9f80e91c202bb"><div class="ttname"><a href="../../d3/d84/classConductor.html#a70258ed0503b873d68d9f80e91c202bb">Conductor::middleSegment</a></div><div class="ttdeci">ConductorSegment * middleSegment()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01196">conductor.cpp:1196</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a7ac32f27f9287cebb1e5c2c328d22758"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a7ac32f27f9287cebb1e5c2c328d22758">ConductorProperties::fromXml</a></div><div class="ttdeci">void fromXml(QDomElement &amp;)</div><div class="ttdoc">ConductorProperties::fromXml Import conductor propertie, from the attribute of the xml element 'e'.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d03/conductorproperties_8cpp_source.html#l00307">conductorproperties.cpp:307</a></div></div>
<div class="ttc" id="aclassConductor_html_a4444fdcc547f1c78a62254a3dad0a4fd"><div class="ttname"><a href="../../d3/d84/classConductor.html#a4444fdcc547f1c78a62254a3dad0a4fd">Conductor::toXml</a></div><div class="ttdeci">QDomElement toXml(QDomDocument &amp;, QHash&lt; Terminal *, int &gt; &amp;) const</div><div class="ttdoc">Conductor::toXml Exporte les caracteristiques du conducteur sous forme d'une element XML.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01010">conductor.cpp:1010</a></div></div>
<div class="ttc" id="aclassConductor_html_a4468b131db64527cf524701627df25fc"><div class="ttname"><a href="../../d3/d84/classConductor.html#a4468b131db64527cf524701627df25fc">Conductor::~Conductor</a></div><div class="ttdeci">~Conductor() override</div><div class="ttdoc">Conductor::~Conductor Destructor. The conductor is removed from is terminal.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00137">conductor.cpp:137</a></div></div>
<div class="ttc" id="aclassQetGraphicsHandlerItem_html"><div class="ttname"><a href="../../de/df5/classQetGraphicsHandlerItem.html">QetGraphicsHandlerItem</a></div><div class="ttdoc">The QetGraphicsHandlerItem class This graphics item represents a point, destined to be used as an han...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d91/qetgraphicshandleritem_8h_source.html#l00036">qetgraphicshandleritem.h:37</a></div></div>
<div class="ttc" id="aconductor_8h_html_a6475acccfc5a61a6e11c96b66815d513"><div class="ttname"><a href="../../d7/d0f/conductor_8h.html#a6475acccfc5a61a6e11c96b66815d513">isBetween</a></div><div class="ttdeci">bool isBetween(const T a, const T b, const T c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00223">conductor.h:223</a></div></div>
<div class="ttc" id="aclassConductor_html_a6ce9bc6c9c6f6fad3c96322a1776eeb3"><div class="ttname"><a href="../../d3/d84/classConductor.html#a6ce9bc6c9c6f6fad3c96322a1776eeb3">Conductor::displayedTextChanged</a></div><div class="ttdeci">void displayedTextChanged()</div><div class="ttdoc">Conductor::displayedTextChanged Update the properties (text) of this conductor and other conductors a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01606">conductor.cpp:1606</a></div></div>
<div class="ttc" id="aclassConductorSegment_html_a5ddcdf5405e5a01ec08f8e14a33db742"><div class="ttname"><a href="../../dc/d5b/classConductorSegment.html#a5ddcdf5405e5a01ec08f8e14a33db742">ConductorSegment::length</a></div><div class="ttdeci">qreal length() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dee/conductorsegment_8cpp_source.html#l00505">conductorsegment.cpp:505</a></div></div>
<div class="ttc" id="aclassConductor_html_a472d563b43401a6ff84433310fd94059"><div class="ttname"><a href="../../d3/d84/classConductor.html#a472d563b43401a6ff84433310fd94059">Conductor::m_vector_index</a></div><div class="ttdeci">int m_vector_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00165">conductor.h:165</a></div></div>
<div class="ttc" id="aconductor_8cpp_html_ae491cfb1a5b53c60ad377bf63d52ee74"><div class="ttname"><a href="../../d9/d9d/conductor_8cpp.html#ae491cfb1a5b53c60ad377bf63d52ee74">relatedConductors</a></div><div class="ttdeci">QList&lt; Conductor * &gt; relatedConductors(const Conductor *conductor)</div><div class="ttdoc">relatedConductors</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l02022">conductor.cpp:2022</a></div></div>
<div class="ttc" id="aclassConductor_html_a101f284e97dd2da6be533e776959e2e7"><div class="ttname"><a href="../../d3/d84/classConductor.html#a101f284e97dd2da6be533e776959e2e7">Conductor::pathFromXml</a></div><div class="ttdeci">bool pathFromXml(const QDomElement &amp;)</div><div class="ttdoc">Conductor::pathFromXml Generate the path (of the line) from xml file by checking the segments in the ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01075">conductor.cpp:1075</a></div></div>
<div class="ttc" id="aclassConductor_html_ae6763a62a0808e679cb4d2a685af59f6"><div class="ttname"><a href="../../d3/d84/classConductor.html#ae6763a62a0808e679cb4d2a685af59f6">Conductor::bends</a></div><div class="ttdeci">QList&lt; ConductorBend &gt; bends() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01843">conductor.cpp:1843</a></div></div>
<div class="ttc" id="aconductorautonumerotation_8h_html"><div class="ttname"><a href="../../dd/df1/conductorautonumerotation_8h.html">conductorautonumerotation.h</a></div></div>
<div class="ttc" id="aclassConductor_html_aefaa9decb5b8c78c27b2673c2950d633"><div class="ttname"><a href="../../d3/d84/classConductor.html#aefaa9decb5b8c78c27b2673c2950d633">Conductor::valideXml</a></div><div class="ttdeci">static bool valideXml(QDomElement &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00575">conductor.cpp:575</a></div></div>
<div class="ttc" id="aclassConductor_html_a23f980cf7a29cfe55378b504ecfecde1"><div class="ttname"><a href="../../d3/d84/classConductor.html#a23f980cf7a29cfe55378b504ecfecde1">Conductor::setProperties</a></div><div class="ttdeci">void setProperties(const ConductorProperties &amp;property)</div><div class="ttdoc">Conductor::setProperties Set property as current property of conductor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01538">conductor.cpp:1538</a></div></div>
<div class="ttc" id="anamespaceQET_html_a4b89ec5286ac7d239614dd3597e60339"><div class="ttname"><a href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339">QET::ConductorSegmentType</a></div><div class="ttdeci">ConductorSegmentType</div><div class="ttdoc">Known kinds of conductor segments.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00088">qet.h:88</a></div></div>
<div class="ttc" id="aclassConductor_html_aa1955dfad47e46a874d83fa606269e8a"><div class="ttname"><a href="../../d3/d84/classConductor.html#aa1955dfad47e46a874d83fa606269e8a">Conductor::setPropertyToPotential</a></div><div class="ttdeci">void setPropertyToPotential(const ConductorProperties &amp;property, bool only_text=false)</div><div class="ttdoc">Conductor::setPropertiesToPotential.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01507">conductor.cpp:1507</a></div></div>
<div class="ttc" id="aclassConductor_html_a44995cef34e660c9c5b2349d97d18029"><div class="ttname"><a href="../../d3/d84/classConductor.html#a44995cef34e660c9c5b2349d97d18029">Conductor::pointsToSegments</a></div><div class="ttdeci">void pointsToSegments(const QList&lt; QPointF &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00958">conductor.cpp:958</a></div></div>
<div class="ttc" id="aclassConductor_html_aeec4450e97f07bc47cd0ff2586f44578"><div class="ttname"><a href="../../d3/d84/classConductor.html#aeec4450e97f07bc47cd0ff2586f44578">Conductor::handlerMousePressEvent</a></div><div class="ttdeci">void handlerMousePressEvent(QetGraphicsHandlerItem *qghi, QGraphicsSceneMouseEvent *event)</div><div class="ttdoc">Conductor::handlerMousePressEvent.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00771">conductor.cpp:771</a></div></div>
<div class="ttc" id="aclassConductor_html_abd57a9f36ef23409af3b01e3060d33ec"><div class="ttname"><a href="../../d3/d84/classConductor.html#abd57a9f36ef23409af3b01e3060d33ec">Conductor::m_handler_vector</a></div><div class="ttdeci">QVector&lt; QetGraphicsHandlerItem * &gt; m_handler_vector</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00164">conductor.h:164</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a6e199bba0474fcef619c8f13ff737604"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a6e199bba0474fcef619c8f13ff737604">ConductorProperties::type</a></div><div class="ttdeci">ConductorType type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00083">conductorproperties.h:83</a></div></div>
<div class="ttc" id="aclassConductor_html_a6f60f9f146fd142ee57b84084c843409"><div class="ttname"><a href="../../d3/d84/classConductor.html#a6f60f9f146fd142ee57b84084c843409">Conductor::nearShape</a></div><div class="ttdeci">virtual QPainterPath nearShape() const</div><div class="ttdoc">Conductor::nearShape.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00904">conductor.cpp:904</a></div></div>
<div class="ttc" id="aclassConductor_html_a54b96cf58e556d6c21535697106b53b6"><div class="ttname"><a href="../../d3/d84/classConductor.html#a54b96cf58e556d6c21535697106b53b6">Conductor::conductor_profiles</a></div><div class="ttdeci">ConductorProfilesGroup conductor_profiles</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00185">conductor.h:185</a></div></div>
<div class="ttc" id="aconductor_8cpp_html_a35a4e21b8fe125223eedbef06887fc54"><div class="ttname"><a href="../../d9/d9d/conductor_8cpp.html#a35a4e21b8fe125223eedbef06887fc54">isContained</a></div><div class="ttdeci">bool isContained(const QPointF &amp;a, const QPointF &amp;b, const QPointF &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01763">conductor.cpp:1763</a></div></div>
<div class="ttc" id="aclassConductor_html_ac45a028d155b9996b29d048c6c4a2550"><div class="ttname"><a href="../../d3/d84/classConductor.html#ac45a028d155b9996b29d048c6c4a2550">Conductor::before_mov_text_pos_</a></div><div class="ttdeci">QPointF before_mov_text_pos_</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00178">conductor.h:178</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_afb6cb4af311fb73e12b2526a9db73559"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#afb6cb4af311fb73e12b2526a9db73559">ConductorProperties::horiz_rotate_text</a></div><div class="ttdeci">double horiz_rotate_text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00101">conductorproperties.h:101</a></div></div>
<div class="ttc" id="aclassConductor_html_ab0584ca715d56bd2b650ac811a6fa4ef"><div class="ttname"><a href="../../d3/d84/classConductor.html#ab0584ca715d56bd2b650ac811a6fa4ef">Conductor::m_freeze_label</a></div><div class="ttdeci">bool m_freeze_label</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00189">conductor.h:189</a></div></div>
<div class="ttc" id="aclassConductor_html_aeba0bf998f55fd1a797b2db95822edd6"><div class="ttname"><a href="../../d3/d84/classConductor.html#aeba0bf998f55fd1a797b2db95822edd6">Conductor::movePointIntoPolygon</a></div><div class="ttdeci">static QPointF movePointIntoPolygon(const QPointF &amp;, const QPainterPath &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01953">conductor.cpp:1953</a></div></div>
<div class="ttc" id="aclassDiagram_html_aca79c4ab46b3b8d3869affb2344253e8"><div class="ttname"><a href="../../da/d91/classDiagram.html#aca79c4ab46b3b8d3869affb2344253e8">Diagram::snapToGrid</a></div><div class="ttdeci">static QPointF snapToGrid(const QPointF &amp;p)</div><div class="ttdoc">Diagram::snapToGrid Return a nearest snap point of p.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0d/diagram_8cpp_source.html#l02240">diagram.cpp:2240</a></div></div>
<div class="ttc" id="aclassConductor_html_a74db48e53dcea4e31d4b16b8c6bc7ce7"><div class="ttname"><a href="../../d3/d84/classConductor.html#a74db48e53dcea4e31d4b16b8c6bc7ce7">Conductor::fromXml</a></div><div class="ttdeci">bool fromXml(QDomElement &amp;)</div><div class="ttdoc">Conductor::fromXml Load the conductor and her information from xml element.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00976">conductor.cpp:976</a></div></div>
<div class="ttc" id="aclassConductor_html_a25b82af24dc6117765fb802c68422c18"><div class="ttname"><a href="../../d3/d84/classConductor.html#a25b82af24dc6117765fb802c68422c18">Conductor::length</a></div><div class="ttdeci">qreal length() const</div><div class="ttdoc">Conductor::length.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01189">conductor.cpp:1189</a></div></div>
<div class="ttc" id="aclassConductor_html_a8533c97f8d0dfd67df8e3a544b9930d5"><div class="ttname"><a href="../../d3/d84/classConductor.html#a8533c97f8d0dfd67df8e3a544b9930d5">Conductor::getSign</a></div><div class="ttdeci">static int getSign(const qreal &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01416">conductor.cpp:1416</a></div></div>
<div class="ttc" id="aclassConductor_html_ade9164e49ea74c88d522ec8227f67944"><div class="ttname"><a href="../../d3/d84/classConductor.html#ade9164e49ea74c88d522ec8227f67944">Conductor::junctions</a></div><div class="ttdeci">QList&lt; QPointF &gt; junctions() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01773">conductor.cpp:1773</a></div></div>
<div class="ttc" id="aclassConductorProfile_html_afd04acde9a63054014226d7f878a799b"><div class="ttname"><a href="../../de/d50/classConductorProfile.html#afd04acde9a63054014226d7f878a799b">ConductorProfile::width</a></div><div class="ttdeci">qreal width() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/conductorprofile_8cpp_source.html#l00083">conductorprofile.cpp:83</a></div></div>
<div class="ttc" id="aclassConductorProfile_html_adddd10be98df8d611560d00000bebbe8"><div class="ttname"><a href="../../de/d50/classConductorProfile.html#adddd10be98df8d611560d00000bebbe8">ConductorProfile::segments</a></div><div class="ttdeci">QList&lt; ConductorSegmentProfile * &gt; segments</div><div class="ttdoc">Segments composing the conductor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d39/conductorprofile_8h_source.html#l00040">conductorprofile.h:40</a></div></div>
<div class="ttc" id="aclassConductor_html_ace12c3b3000423ad059d98cc1d9a11ea"><div class="ttname"><a href="../../d3/d84/classConductor.html#ace12c3b3000423ad059d98cc1d9a11ea">Conductor::segments</a></div><div class="ttdeci">ConductorSegment * segments</div><div class="ttdoc">Segments composing the conductor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00172">conductor.h:172</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a66863b6082368ad72bc2f593774787d5"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a66863b6082368ad72bc2f593774787d5">ConductorProperties::color</a></div><div class="ttdeci">QColor color</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00085">conductorproperties.h:85</a></div></div>
<div class="ttc" id="aclassDiagram_html"><div class="ttname"><a href="../../da/d91/classDiagram.html">Diagram</a></div><div class="ttdoc">The Diagram class This class represents an electric diagram. It manages its various child elements,...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1b/diagram_8h_source.html#l00055">diagram.h:56</a></div></div>
<div class="ttc" id="aconductorpropertiesdialog_8h_html"><div class="ttname"><a href="../../d3/d80/conductorpropertiesdialog_8h.html">conductorpropertiesdialog.h</a></div></div>
<div class="ttc" id="aclassConductorSegment_html_ae487262ea29ceb538015805470591d60"><div class="ttname"><a href="../../dc/d5b/classConductorSegment.html#ae487262ea29ceb538015805470591d60">ConductorSegment::isFirstSegment</a></div><div class="ttdeci">bool isFirstSegment() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dee/conductorsegment_8cpp_source.html#l00409">conductorsegment.cpp:409</a></div></div>
<div class="ttc" id="aqetdiagrameditor_8h_html"><div class="ttname"><a href="../../d0/db5/qetdiagrameditor_8h.html">qetdiagrameditor.h</a></div></div>
<div class="ttc" id="aclassConductor_html_a50ed86a7b12fb4163be590496d48c3e0"><div class="ttname"><a href="../../d3/d84/classConductor.html#a50ed86a7b12fb4163be590496d48c3e0">Conductor::type</a></div><div class="ttdeci">int type() const override</div><div class="ttdoc">type Enable the use of qgraphicsitem_cast to safely cast a QGraphicsItem into a conductor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00077">conductor.h:77</a></div></div>
<div class="ttc" id="aclassDiagramTextItem_html_a3af1e2bcc07b3f50aba04eba4e6efe78"><div class="ttname"><a href="../../dc/d0e/classDiagramTextItem.html#a3af1e2bcc07b3f50aba04eba4e6efe78">DiagramTextItem::setColor</a></div><div class="ttdeci">void setColor(const QColor &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d93/diagramtextitem_8cpp_source.html#l00167">diagramtextitem.cpp:167</a></div></div>
<div class="ttc" id="aclassQet_html_a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37"><div class="ttname"><a href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a931c67b8cd0119b7d5396624881dab37">Qet::South</a></div><div class="ttdeci">@ South</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00208">qet.h:208</a></div></div>
<div class="ttc" id="aclassConductor_html_ab352e0bd0e048b8897ad67684d00b01a"><div class="ttname"><a href="../../d3/d84/classConductor.html#ab352e0bd0e048b8897ad67684d00b01a">Conductor::calculateTextItemPosition</a></div><div class="ttdeci">void calculateTextItemPosition()</div><div class="ttdoc">Conductor::calculateTextItemPosition Move the text at middle of conductor (if is vertical or horizont...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01290">conductor.cpp:1290</a></div></div>
<div class="ttc" id="aclassConductorTextItem_html_a6689930383cb2519c54effef590abe58"><div class="ttname"><a href="../../da/d11/classConductorTextItem.html#a6689930383cb2519c54effef590abe58">ConductorTextItem::wasRotateByUser</a></div><div class="ttdeci">virtual bool wasRotateByUser() const</div><div class="ttdoc">ConductorTextItem::wasRotateByUser.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddf/conductortextitem_8cpp_source.html#l00092">conductortextitem.cpp:92</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a833f6a86de23a2bc7598be5ddf67c14a"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a833f6a86de23a2bc7598be5ddf67c14a">ConductorProperties::m_wire_color</a></div><div class="ttdeci">QString m_wire_color</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00092">conductorproperties.h:92</a></div></div>
<div class="ttc" id="aclassConductorProfile_html"><div class="ttname"><a href="../../de/d50/classConductorProfile.html">ConductorProfile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d39/conductorprofile_8h_source.html#l00028">conductorprofile.h:28</a></div></div>
<div class="ttc" id="aclassConductor_html_ad89a22b06b1849b5726e76541788744c"><div class="ttname"><a href="../../d3/d84/classConductor.html#ad89a22b06b1849b5726e76541788744c">Conductor::handlerMouseMoveEvent</a></div><div class="ttdeci">void handlerMouseMoveEvent(QetGraphicsHandlerItem *qghi, QGraphicsSceneMouseEvent *event)</div><div class="ttdoc">Conductor::handlerMouseMoveEvent.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00794">conductor.cpp:794</a></div></div>
<div class="ttc" id="aclassConductor_html_a5707add67d3f3f37633b2b6e7c4d131e"><div class="ttname"><a href="../../d3/d84/classConductor.html#a5707add67d3f3f37633b2b6e7c4d131e">Conductor::mouseReleaseEvent</a></div><div class="ttdeci">void mouseReleaseEvent(QGraphicsSceneMouseEvent *event) override</div><div class="ttdoc">Conductor::mouseReleaseEvent.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00635">conductor.cpp:635</a></div></div>
<div class="ttc" id="aclassConductor_html_aa4d9b88ee021d32c11d90b425a07a69d"><div class="ttname"><a href="../../d3/d84/classConductor.html#aa4d9b88ee021d32c11d90b425a07a69d">Conductor::currentPathType</a></div><div class="ttdeci">Qt::Corner currentPathType() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01911">conductor.cpp:1911</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_af41a8da3da3b391cee97a2a248fad026"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#af41a8da3da3b391cee97a2a248fad026">autonum::sequentialNumbers::hundred_folio</a></div><div class="ttdeci">QStringList hundred_folio</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6f/assignvariables_8h_source.html#l00054">assignvariables.h:54</a></div></div>
<div class="ttc" id="aclassQet_html_a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233"><div class="ttname"><a href="../../d9/d20/classQet.html#a406a5910496b8aee9d5127ebef76ba88a024fd6937f95b9d84df34a721fb17233">Qet::West</a></div><div class="ttdeci">@ West</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00209">qet.h:209</a></div></div>
<div class="ttc" id="aclassConductorSegment_html_a801965b0c65b1980159543b2147038da"><div class="ttname"><a href="../../dc/d5b/classConductorSegment.html#a801965b0c65b1980159543b2147038da">ConductorSegment::isHorizontal</a></div><div class="ttdeci">bool isHorizontal() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dee/conductorsegment_8cpp_source.html#l00442">conductorsegment.cpp:442</a></div></div>
<div class="ttc" id="aclassConductor_html_a1169af7cb6b1149b89469a70cb49dc2a"><div class="ttname"><a href="../../d3/d84/classConductor.html#a1169af7cb6b1149b89469a70cb49dc2a">Conductor::conductor_pen</a></div><div class="ttdeci">static QPen conductor_pen</div><div class="ttdoc">QPen et QBrush objects used to draw conductors.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00192">conductor.h:192</a></div></div>
<div class="ttc" id="aclassDiagram_html_aadc97c48501180ecd35ce25a8ebf161d"><div class="ttname"><a href="../../da/d91/classDiagram.html#aadc97c48501180ecd35ce25a8ebf161d">Diagram::undoStack</a></div><div class="ttdeci">QUndoStack &amp; undoStack()</div><div class="ttdoc">Diagram::undoStack.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1b/diagram_8h_source.html#l00397">diagram.h:397</a></div></div>
<div class="ttc" id="aclassConductor_html_aa9680d1f729374c7ffe916837a488d55"><div class="ttname"><a href="../../d3/d84/classConductor.html#aa9680d1f729374c7ffe916837a488d55">Conductor::movementType</a></div><div class="ttdeci">static Qt::Corner movementType(const QPointF &amp;, const QPointF &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01900">conductor.cpp:1900</a></div></div>
<div class="ttc" id="aconductorsegmentprofile_8h_html"><div class="ttname"><a href="../../d7/d8f/conductorsegmentprofile_8h.html">conductorsegmentprofile.h</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a635bb7edda029f842c57f06449643636"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a635bb7edda029f842c57f06449643636">ConductorProperties::cond_size</a></div><div class="ttdeci">double cond_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00099">conductorproperties.h:99</a></div></div>
<div class="ttc" id="aterminal_8h_html"><div class="ttname"><a href="../../dc/dbe/terminal_8h.html">terminal.h</a></div></div>
<div class="ttc" id="aclassConductor_html_a397a49e90f3c96eaf2f185548e23c866"><div class="ttname"><a href="../../d3/d84/classConductor.html#a397a49e90f3c96eaf2f185548e23c866">Conductor::profile</a></div><div class="ttdeci">ConductorProfile profile(Qt::Corner) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01443">conductor.cpp:1443</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_a1843e7c596b163de22955fcc1c169692"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a1843e7c596b163de22955fcc1c169692">autonum::sequentialNumbers::hundred</a></div><div class="ttdeci">QStringList hundred</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6f/assignvariables_8h_source.html#l00053">assignvariables.h:53</a></div></div>
<div class="ttc" id="aclassSingleLineProperties_html_a1f16a53d9a5818522c88e31f0270e4ec"><div class="ttname"><a href="../../d9/d59/classSingleLineProperties.html#a1f16a53d9a5818522c88e31f0270e4ec">SingleLineProperties::draw</a></div><div class="ttdeci">void draw(QPainter *, QET::ConductorSegmentType, const QRectF &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d03/conductorproperties_8cpp_source.html#l00065">conductorproperties.cpp:65</a></div></div>
<div class="ttc" id="anamespaceQET_1_1Icons_html_a85ec41d77fadd711bb1ee17deb0dbebd"><div class="ttname"><a href="../../d1/d51/namespaceQET_1_1Icons.html#a85ec41d77fadd711bb1ee17deb0dbebd">QET::Icons::sl</a></div><div class="ttdeci">QIcon sl</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3c/qeticons_8cpp_source.html#l00202">qeticons.cpp:202</a></div></div>
<div class="ttc" id="aclassConductor_html_aa50d07a5bf563b2638a1f817dae9e5ee"><div class="ttname"><a href="../../d3/d84/classConductor.html#aa50d07a5bf563b2638a1f817dae9e5ee">Conductor::mouseDoubleClickEvent</a></div><div class="ttdeci">void mouseDoubleClickEvent(QGraphicsSceneMouseEvent *event) override</div><div class="ttdoc">Conductor::mouseDoubleClickEvent Manage the mouse double click.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00613">conductor.cpp:613</a></div></div>
<div class="ttc" id="aclassConductor_html_a971beedc17f0729c9026ac917da133a5a501f3c487de3ac2177f6e52952c9a8e0"><div class="ttname"><a href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5a501f3c487de3ac2177f6e52952c9a8e0">Conductor::None</a></div><div class="ttdeci">@ None</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00065">conductor.h:65</a></div></div>
<div class="ttc" id="aclassConductor_html_a94d54afba64998cbeccd6f24add6f823"><div class="ttname"><a href="../../d3/d84/classConductor.html#a94d54afba64998cbeccd6f24add6f823">Conductor::getCoeff</a></div><div class="ttdeci">static int getCoeff(const qreal &amp;, const qreal &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01408">conductor.cpp:1408</a></div></div>
<div class="ttc" id="aclassConductor_html_a409cf24ca0ee090594c10871de24ab9d"><div class="ttname"><a href="../../d3/d84/classConductor.html#a409cf24ca0ee090594c10871de24ab9d">Conductor::rSequenceNum</a></div><div class="ttdeci">autonum::sequentialNumbers &amp; rSequenceNum()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00132">conductor.h:132</a></div></div>
<div class="ttc" id="aclassConductor_html_a971beedc17f0729c9026ac917da133a5a69e3d7d6cf2d63767cebc541bab21a6f"><div class="ttname"><a href="../../d3/d84/classConductor.html#a971beedc17f0729c9026ac917da133a5a69e3d7d6cf2d63767cebc541bab21a6f">Conductor::Alert</a></div><div class="ttdeci">@ Alert</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00065">conductor.h:65</a></div></div>
<div class="ttc" id="aclassConductor_html_ad3546c9cc056283d1b8b64ba0660f8ab"><div class="ttname"><a href="../../d3/d84/classConductor.html#ad3546c9cc056283d1b8b64ba0660f8ab">Conductor::textItem</a></div><div class="ttdeci">ConductorTextItem * textItem() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00566">conductor.cpp:566</a></div></div>
<div class="ttc" id="aclassConductor_html_a7ece2eac7ad3deec235c64cc98a9c43a"><div class="ttname"><a href="../../d3/d84/classConductor.html#a7ece2eac7ad3deec235c64cc98a9c43a">Conductor::setProfiles</a></div><div class="ttdeci">void setProfiles(const ConductorProfilesGroup &amp;)</div><div class="ttdoc">Conductor::setProfiles.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01924">conductor.cpp:1924</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_afc35eb9843600bf4e3ac95d2f28563a5"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#afc35eb9843600bf4e3ac95d2f28563a5">ConductorProperties::m_formula</a></div><div class="ttdeci">QString m_formula</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00094">conductorproperties.h:94</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a46fac82e5a8cf63d5f12f755139af309"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a46fac82e5a8cf63d5f12f755139af309">ConductorProperties::m_color_2</a></div><div class="ttdeci">QColor m_color_2</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00086">conductorproperties.h:86</a></div></div>
<div class="ttc" id="aclassautonum_1_1sequentialNumbers_html_a287cc81d6e568683a24cab6e6a2e8c82"><div class="ttname"><a href="../../d3/dcc/classautonum_1_1sequentialNumbers.html#a287cc81d6e568683a24cab6e6a2e8c82">autonum::sequentialNumbers::toXml</a></div><div class="ttdeci">QDomElement toXml(QDomDocument &amp;document, const QString &amp;tag_name=QString(&quot;sequentialNumbers&quot;)) const</div><div class="ttdoc">sequentialNumbers::toXml export this sequential numbers into a QDomElement.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dbe/assignvariables_8cpp_source.html#l00094">assignvariables.cpp:94</a></div></div>
<div class="ttc" id="adiagram_8h_html"><div class="ttname"><a href="../../d9/d1b/diagram_8h.html">diagram.h</a></div></div>
<div class="ttc" id="anamespaceQET_html_a4b89ec5286ac7d239614dd3597e60339a1b078af10b3c6f1432907bd97d71a7d9"><div class="ttname"><a href="../../d3/d9a/namespaceQET.html#a4b89ec5286ac7d239614dd3597e60339a1b078af10b3c6f1432907bd97d71a7d9">QET::Vertical</a></div><div class="ttdeci">@ Vertical</div><div class="ttdoc">Vertical segment.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/qet_8h_source.html#l00090">qet.h:90</a></div></div>
<div class="ttc" id="aclassConductor_html_ac98d5b6538ebfde79cf8742eecec96a6"><div class="ttname"><a href="../../d3/d84/classConductor.html#ac98d5b6538ebfde79cf8742eecec96a6">Conductor::m_moved_segment</a></div><div class="ttdeci">ConductorSegment * m_moved_segment</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00177">conductor.h:177</a></div></div>
<div class="ttc" id="aclassConductor_html_ad0705d9d13a1a46875b375d0c5f7a900"><div class="ttname"><a href="../../d3/d84/classConductor.html#ad0705d9d13a1a46875b375d0c5f7a900">Conductor::highlight</a></div><div class="ttdeci">virtual Highlight highlight() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01589">conductor.cpp:1589</a></div></div>
<div class="ttc" id="aclassConductorProperties_html_a8f6309db4f1833e2e6739522ecf52845"><div class="ttname"><a href="../../d4/d0b/classConductorProperties.html#a8f6309db4f1833e2e6739522ecf52845">ConductorProperties::m_horizontal_alignment</a></div><div class="ttdeci">Qt::Alignment m_horizontal_alignment</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d97/conductorproperties_8h_source.html#l00107">conductorproperties.h:107</a></div></div>
<div class="ttc" id="aclassConductor_html"><div class="ttname"><a href="../../d3/d84/classConductor.html">Conductor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0f/conductor_8h_source.html#l00042">conductor.h:43</a></div></div>
<div class="ttc" id="aclassTerminal_html"><div class="ttname"><a href="../../d9/ded/classTerminal.html">Terminal</a></div><div class="ttdoc">The Terminal class This class represents a terminal of an electrical element, i.e....</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbe/terminal_8h_source.html#l00034">terminal.h:35</a></div></div>
<div class="ttc" id="aclassConductor_html_a920f3ae309c17848d078cb69e54e5cbd"><div class="ttname"><a href="../../d3/d84/classConductor.html#a920f3ae309c17848d078cb69e54e5cbd">Conductor::hoverLeaveEvent</a></div><div class="ttdeci">void hoverLeaveEvent(QGraphicsSceneHoverEvent *event) override</div><div class="ttdoc">Conductor::hoverLeaveEvent Manage the mouse leave event.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l00657">conductor.cpp:657</a></div></div>
<div class="ttc" id="aclassConductor_html_ac6b418b398cbb61a5c73b5136b99c050"><div class="ttname"><a href="../../d3/d84/classConductor.html#ac6b418b398cbb61a5c73b5136b99c050">Conductor::editProperty</a></div><div class="ttdeci">void editProperty()</div><div class="ttdoc">Conductor::editProperty.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9d/conductor_8cpp_source.html#l01717">conductor.cpp:1717</a></div></div>
<div class="ttc" id="aconductorsegment_8h_html"><div class="ttname"><a href="../../d6/d9f/conductorsegment_8h.html">conductorsegment.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
